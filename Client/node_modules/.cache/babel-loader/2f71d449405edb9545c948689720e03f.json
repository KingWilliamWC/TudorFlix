{"ast":null,"code":"import _regeneratorRuntime from\"/home/william/Documents/Projects/TudorFlix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/william/Documents/Projects/TudorFlix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/william/Documents/Projects/TudorFlix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/william/Documents/Projects/TudorFlix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/william/Documents/Projects/TudorFlix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/william/Documents/Projects/TudorFlix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import'./Discover.css';import MoviesRowFull from'./MoviesRowFull';import MovieSlideUp from'../MovieFullTab';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Discover=/*#__PURE__*/function(_Component){_inherits(Discover,_Component);var _super=_createSuper(Discover);function Discover(props){var _this;_classCallCheck(this,Discover);_this=_super.call(this,props);_this.userLoadMore=function(){axios.post(_this.props.routes.discover,{pageIndex:_this.state.pageIndex,genres:JSON.parse(localStorage.getItem('username')).genres}).then(function(res){var currentMovies=_this.state.DiscoverMovies;for(var j=0;j<res.data.data.length;j++){for(var i=0;i<res.data.data[j].results.length;i++){currentMovies.push(res.data.data[j].results[i]);}}_this.setState({DiscoverMovies:currentMovies,pageIndex:_this.state.pageIndex+3});console.log(_this.state.DiscoverMovies);});};_this.handleMovieClick=function(movieID){if(movieID!=='none'){_this.getMovieInfo(movieID);}else{if(_this.state.isOpen===0){_this.setState({isOpen:1});// if by some magic the user has done this\n}else{_this.setState({isOpen:0});_this.forceUpdate();}}};_this.state={DiscoverMovies:[],pageIndex:2,slideUpClass:['movieFullTabContainer','movieFullTabContainerClosed'],isOpen:0};return _this;}_createClass(Discover,[{key:\"componentDidMount\",value:function componentDidMount(){this.requestData();}},{key:\"requestData\",value:function(){var _requestData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(this.props.routes.discover,{pageIndex:1,genres:JSON.parse(localStorage.getItem('username')).genres}).then(function(res){_this2.setState({DiscoverMovies:res.data.data[0].results});});case 2:case\"end\":return _context.stop();}}},_callee,this);}));function requestData(){return _requestData.apply(this,arguments);}return requestData;}()},{key:\"getMovieInfo\",value:function(){var _getMovieInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(movieID){var _this3=this;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"\".concat(this.props.routes.movie,\"id=\").concat(movieID)).then(function(res){var statetoset=0;if(_this3.state.isOpen===0){statetoset=1;}_this3.setState({currentMovieData:res.data,isOpen:statetoset});return res;});case 2:case\"end\":return _context2.stop();}}},_callee2,this);}));function getMovieInfo(_x){return _getMovieInfo.apply(this,arguments);}return getMovieInfo;}()},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/_jsxs(\"div\",{id:\"DiscoverTab\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"popularTitle\",children:\"Discover For You\"}),this.state.DiscoverMovies.length===0?/*#__PURE__*/_jsx(\"p\",{id:\"nullMoviesTitle\",children:\"Loading...\"}):/*#__PURE__*/_jsx(MoviesRowFull,{clickHandler:this.handleMovieClick,favourites:this.state.DiscoverMovies}),/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return _this4.userLoadMore();},id:\"viewMoreButton\",children:\"View More\"}),this.state.isOpen?/*#__PURE__*/_jsx(MovieSlideUp,{routes:this.props.routes,data:this.state.currentMovieData.data[0],clickHandler:this.handleMovieClick,slideupClass:this.state.slideUpClass[this.state.isOpen]}):'']});}}]);return Discover;}(Component);export default Discover;","map":{"version":3,"sources":["/home/william/Documents/Projects/TudorFlix/Client/src/Components/Discover.js"],"names":["React","Component","axios","MoviesRowFull","MovieSlideUp","Discover","props","userLoadMore","post","routes","discover","pageIndex","state","genres","JSON","parse","localStorage","getItem","then","res","currentMovies","DiscoverMovies","j","data","length","i","results","push","setState","console","log","handleMovieClick","movieID","getMovieInfo","isOpen","forceUpdate","slideUpClass","requestData","get","movie","statetoset","currentMovieData"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport axios from 'axios';\n\nimport './Discover.css';\n\nimport MoviesRowFull from './MoviesRowFull';\nimport MovieSlideUp from '../MovieFullTab';\n\nclass Discover extends Component{\n    constructor(props){\n        super(props);\n\n        this.state = {\n            DiscoverMovies: [],\n            pageIndex: 2,\n            slideUpClass: ['movieFullTabContainer', 'movieFullTabContainerClosed'],\n            isOpen: 0,\n        }\n    }\n\n    componentDidMount(){\n        this.requestData();\n    }\n\n    async requestData(){\n        await axios.post(this.props.routes.discover, {pageIndex: 1, genres: JSON.parse((localStorage.getItem('username'))).genres})\n            .then(res => {\n                this.setState({DiscoverMovies: res.data.data[0].results});\n            })\n    }\n\n    async getMovieInfo(movieID){\n        await axios.get(`${this.props.routes.movie}id=${movieID}`)\n            .then(res => {\n                var statetoset = 0;\n                if(this.state.isOpen === 0){\n                    statetoset = 1;\n                }\n                this.setState({currentMovieData: res.data, isOpen: statetoset});\n                return res;\n            })\n    }\n\n    userLoadMore = () => {\n        axios.post(this.props.routes.discover, {pageIndex: this.state.pageIndex, genres: JSON.parse((localStorage.getItem('username'))).genres})\n        .then(res => {\n            var currentMovies = this.state.DiscoverMovies;\n            for(var j = 0; j < res.data.data.length; j++){\n                for(var i = 0; i < res.data.data[j].results.length; i++){\n                    currentMovies.push(res.data.data[j].results[i])\n                }\n            }\n            \n            this.setState({DiscoverMovies: currentMovies, pageIndex: this.state.pageIndex + 3});\n            console.log(this.state.DiscoverMovies);\n        })\n    }\n\n    handleMovieClick = (movieID) => {\n        if(movieID !== 'none'){\n            this.getMovieInfo(movieID)\n        }else{\n            if(this.state.isOpen === 0){\n                this.setState({isOpen: 1}); // if by some magic the user has done this\n            }else{\n                this.setState({isOpen: 0});\n                this.forceUpdate();\n            }\n        }\n    }\n    \n    render(){\n        return(\n            <div id='DiscoverTab'>\n                <p className='popularTitle'>Discover For You</p>\n                {this.state.DiscoverMovies.length === 0 ? <p id='nullMoviesTitle'>Loading...</p> : <MoviesRowFull clickHandler={this.handleMovieClick} favourites={this.state.DiscoverMovies}/>}\n                <p onClick={() => this.userLoadMore()} id='viewMoreButton'>View More</p>\n                {this.state.isOpen ? <MovieSlideUp routes={this.props.routes} data={this.state.currentMovieData.data[0]} clickHandler={this.handleMovieClick} slideupClass={this.state.slideUpClass[this.state.isOpen]}/> : ''}\n            </div>\n        )\n    }\n}\n\nexport default Discover;"]},"metadata":{},"sourceType":"module"}