{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';//body structure css\nimport'./App.css';import'./Register.css';import ArrowSVG from\"./SVG/Arrow-Solid.svg\";import DramaSVG from\"./SVG/Drama-Solid.svg\";import AdventureSVG from\"./SVG/Adventure-Solid.svg\";import ComedySVG from\"./SVG/Comedy-Solid.svg\";import HorrorSVG from\"./SVG/Horror-Solid.svg\";import SciFiSVG from\"./SVG/SciFi-Solid.svg\";import ActionSVG from\"./SVG/Action-Solid.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Register=/*#__PURE__*/function(_Component){_inherits(Register,_Component);var _super=_createSuper(Register);function Register(props){var _this;_classCallCheck(this,Register);_this=_super.call(this,props);_this.handleFormInput=function(event){if(event.key==='Enter'){_this.userSubmitInfo();}};_this.UserChangeSignType=function(type){document.getElementsByClassName('userInputBox')[0].value='';document.getElementsByClassName('userInputBox')[1].value='';if(type==='signup'){_this.setState({isSigningUp:true,pageContentState:1,errorState:0});}else if(type==='login'){_this.setState({isSigningUp:false,pageContentState:0,errorState:0});}};_this.initializeSignUpSurvey=function(){_this.setState({loginClassState:1,favouritesClassState:1});};_this.userSubmitInfo=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var username,password;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:username=document.getElementsByClassName('userInputBox')[0].value;password=document.getElementsByClassName('userInputBox')[1].value;if(!(_this.state.isSigningUp===false)){_context.next=7;break;}_context.next=5;return axios.post('https://52.151.90.27/api/signin/',{'username':username,'password':password}).then(function(res){if(res.data.message==='no_user'){_this.setState({errorState:1,errorMessage:'Username or Password is Incorrect'});}else if(res.data.message==='user_successful'){localStorage.setItem('username',JSON.stringify(res.data.user));// console.log(JSON.parse((localStorage.getItem('username'))).genres);\n// console.log(JSON.parse((localStorage.getItem('username'))).genres);\nwindow.location.replace('https://52.151.90.27/app');}});case 5:_context.next=9;break;case 7:_context.next=9;return axios.post('https://52.151.90.27/api/isUser/',{'username':username,'password':password}).then(function(res){if(res.data.message==='user_already_exists'){_this.setState({errorState:1,errorMessage:'Username already exists'});}else if(res.data.message==='user_new'){_this.setState({username:username,password:password});_this.initializeSignUpSurvey();}});case 9:case\"end\":return _context.stop();}}},_callee);}));_this.userSubmitSurvey=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('https://52.151.90.27/api/signup/',{'username':_this.state.username,'password':_this.state.password,'genres':_this.state.currentSelectedGenres}).then(function(res){if(res.data.status==='success'){window.location.replace('https://52.151.90.27/app');}});case 2:case\"end\":return _context2.stop();}}},_callee2);}));_this.state={username:'',password:'',errorID:['errorSubmissionContainer','errorSubmissionContainer show'],errorState:0,errorMessage:'',isSigningUp:false,pageContent:[{'title':'Log In','subtitle':'Login To Your TudorFlix Account','topright':/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return _this.UserChangeSignType('signup');},id:\"createAccountLink\",children:\"Create Account\"})]})},{'title':'Sign Up','subtitle':'Create a TudorFlix Account','topright':/*#__PURE__*/_jsxs(\"p\",{children:[\"Already Have An Account? \",/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return _this.UserChangeSignType('login');},id:\"createAccountLink\",children:\"Log In\"})]})}],pageContentState:0,loginClass:['loginContainer','loginContainer loginContainerHide'],loginClassState:0,favouritesClass:['surveyFavouritesContainer','surveyFavouritesContainerShow surveyFavouritesContainer'],favouritesClassState:0,genreClasses:[],currentSelectedGenres:[]};_this.handleGenreClick=_this.handleGenreClick.bind(_assertThisInitialized(_this));return _this;}_createClass(Register,[{key:\"componentDidMount\",value:function componentDidMount(){var genreStyleClassesToAdd=[];for(var x=0;x<6;x++){genreStyleClassesToAdd.push('genreContainer');}this.setState({genreClasses:genreStyleClassesToAdd});}},{key:\"handleGenreClick\",value:function handleGenreClick(index,genrename){if(this.state.currentSelectedGenres.length<3&&!this.state.currentSelectedGenres.includes(genrename)){var currentStyleArray=this.state.genreClasses;var currentGenreArray=this.state.currentSelectedGenres;currentGenreArray.push(genrename);currentStyleArray[index]='genreContainer genreSelected';this.setState({genreClasses:currentStyleArray,currentSelectedGenres:currentGenreArray});}else if(this.state.currentSelectedGenres.includes(genrename)){//user selected the genre already\ncurrentStyleArray=this.state.genreClasses;currentStyleArray[index]='genreContainer';currentGenreArray=this.state.currentSelectedGenres;currentGenreArray=currentGenreArray.filter(function(item){return item!==genrename;});this.setState({genreClasses:currentStyleArray,currentSelectedGenres:currentGenreArray});}}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{id:\"registerApp\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"topContainer\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"logoContainer\",children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{id:\"firstPartLogo\",children:\"Tudor\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Flix\"})]})}),/*#__PURE__*/_jsx(\"div\",{id:\"signUpLinkContainer\",children:this.state.pageContent[this.state.pageContentState].topright})]}),/*#__PURE__*/_jsxs(\"div\",{className:this.state.loginClass[this.state.loginClassState],children:[/*#__PURE__*/_jsx(\"p\",{id:\"loginTitle\",children:this.state.pageContent[this.state.pageContentState].title}),/*#__PURE__*/_jsx(\"p\",{id:\"sublogintitle\",children:this.state.pageContent[this.state.pageContentState].subtitle}),/*#__PURE__*/_jsxs(\"div\",{className:this.state.errorID[this.state.errorState],children:[/*#__PURE__*/_jsx(\"p\",{id:\"errorTitle\",children:\"Error\"}),/*#__PURE__*/_jsx(\"p\",{children:this.state.errorMessage})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"formContainer\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"InputTitleText\",children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{onKeyPress:this.handleFormInput,type:\"username\",className:\"userInputBox\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"passwordForgotContainer\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"InputTitleText\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"p\",{id:\"forgotPasswordText\",children:\"Forgot Your Password?\"})]}),/*#__PURE__*/_jsx(\"input\",{onKeyPress:this.handleFormInput,type:\"password\",className:\"userInputBox\"})]}),/*#__PURE__*/_jsx(\"div\",{onClick:this.userSubmitInfo,id:\"loginButtonContainer\",children:/*#__PURE__*/_jsx(\"img\",{className:\"loginButton\",src:ArrowSVG,alt:\"\"})})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"surveyContainer\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"surveyTitle\",children:\"What Are Your Favourite Genres? (Select Up To 3)\"}),/*#__PURE__*/_jsxs(\"div\",{className:this.state.favouritesClass[this.state.favouritesClassState],children:[/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return _this2.handleGenreClick(0,'drama');},className:this.state.genreClasses[0],children:[/*#__PURE__*/_jsx(\"img\",{className:\"genreImage\",src:DramaSVG,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{className:\"genreName\",children:\"Drama\"})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return _this2.handleGenreClick(1,'action');},className:this.state.genreClasses[1],children:[/*#__PURE__*/_jsx(\"img\",{className:\"genreImage\",src:ActionSVG,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{className:\"genreName\",children:\"Action\"})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return _this2.handleGenreClick(2,'adventure');},className:this.state.genreClasses[2],children:[/*#__PURE__*/_jsx(\"img\",{className:\"genreImage\",src:AdventureSVG,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{className:\"genreName\",children:\"Adventure\"})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return _this2.handleGenreClick(3,'comedy');},className:this.state.genreClasses[3],children:[/*#__PURE__*/_jsx(\"img\",{className:\"genreImage\",src:ComedySVG,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{className:\"genreName\",children:\"Comedy\"})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return _this2.handleGenreClick(4,'horror');},className:this.state.genreClasses[4],children:[/*#__PURE__*/_jsx(\"img\",{className:\"genreImage\",src:HorrorSVG,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{className:\"genreName\",children:\"Horror\"})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return _this2.handleGenreClick(5,'science-fiction');},className:this.state.genreClasses[5],children:[/*#__PURE__*/_jsx(\"img\",{className:\"genreImage\",src:SciFiSVG,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{className:\"genreName\",children:\"Science Fiction\"})]})]}),/*#__PURE__*/_jsx(\"div\",{onClick:this.userSubmitSurvey,id:\"surveyButtonContainer\",children:/*#__PURE__*/_jsx(\"img\",{className:\"loginButton\",src:ArrowSVG,alt:\"\"})})]}),/*#__PURE__*/_jsx(\"p\",{id:\"allrightsText\",children:\"TudorFlix\\xAE 2021 \"})]});}}]);return Register;}(Component);export default Register;","map":{"version":3,"sources":["C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/src/Register.js"],"names":["React","Component","axios","Register","props","handleFormInput","event","key","userSubmitInfo","UserChangeSignType","type","document","getElementsByClassName","value","setState","isSigningUp","pageContentState","errorState","initializeSignUpSurvey","loginClassState","favouritesClassState","username","password","state","post","then","res","data","message","errorMessage","localStorage","setItem","JSON","stringify","user","window","location","replace","userSubmitSurvey","currentSelectedGenres","status","errorID","pageContent","loginClass","favouritesClass","genreClasses","handleGenreClick","bind","genreStyleClassesToAdd","x","push","index","genrename","length","includes","currentStyleArray","currentGenreArray","filter","item","topright","title","subtitle","ArrowSVG","DramaSVG","ActionSVG","AdventureSVG","ComedySVG","HorrorSVG","SciFiSVG"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\n\r\n//body structure css\r\nimport './App.css';\r\n\r\nimport './Register.css';\r\n\r\nimport ArrowSVG from './SVG/Arrow-Solid.svg';\r\nimport DramaSVG from './SVG/Drama-Solid.svg';\r\nimport AdventureSVG from './SVG/Adventure-Solid.svg';\r\nimport ComedySVG from './SVG/Comedy-Solid.svg';\r\nimport HorrorSVG from './SVG/Horror-Solid.svg';\r\nimport SciFiSVG from './SVG/SciFi-Solid.svg';\r\nimport ActionSVG from './SVG/Action-Solid.svg';\r\n\r\nclass Register extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            username: '',\r\n            password: '',\r\n            errorID: ['errorSubmissionContainer', 'errorSubmissionContainer show'],\r\n            errorState: 0,\r\n            errorMessage: '',\r\n            isSigningUp: false,\r\n            pageContent: [\r\n                        {'title': 'Log In', 'subtitle': 'Login To Your TudorFlix Account', 'topright': <p>Don't have an account? <span onClick={() => (this.UserChangeSignType('signup'))} id='createAccountLink'>Create Account</span></p>},\r\n                {'title': 'Sign Up', 'subtitle': 'Create a TudorFlix Account', 'topright': <p>Already Have An Account? <span onClick={() => (this.UserChangeSignType('login'))} id='createAccountLink'>Log In</span></p>}\r\n            ],\r\n            pageContentState: 0,\r\n            loginClass: ['loginContainer', 'loginContainer loginContainerHide'],\r\n            loginClassState: 0,\r\n            favouritesClass: ['surveyFavouritesContainer', 'surveyFavouritesContainerShow surveyFavouritesContainer'],\r\n            favouritesClassState: 0,\r\n            genreClasses: [],\r\n            currentSelectedGenres: [],\r\n        }\r\n\r\n        this.handleGenreClick =  this.handleGenreClick.bind(this)\r\n    }\r\n\r\n    handleFormInput= (event) => {\r\n        if(event.key === 'Enter'){\r\n            this.userSubmitInfo();\r\n        }\r\n    }\r\n\r\n    UserChangeSignType = (type) =>{\r\n        document.getElementsByClassName('userInputBox')[0].value = '';\r\n        document.getElementsByClassName('userInputBox')[1].value = '';\r\n        if(type === 'signup'){\r\n            this.setState({isSigningUp: true, pageContentState: 1, errorState: 0});\r\n        }else if(type === 'login'){\r\n            this.setState({isSigningUp: false, pageContentState: 0, errorState: 0});\r\n        }\r\n    }\r\n\r\n    initializeSignUpSurvey = () => {\r\n        this.setState({loginClassState: 1, favouritesClassState: 1});\r\n    }\r\n\r\n    componentDidMount() {\r\n        var genreStyleClassesToAdd = []\r\n        for (var x = 0; x < 6; x++){\r\n            genreStyleClassesToAdd.push('genreContainer');\r\n        }\r\n        this.setState({genreClasses: genreStyleClassesToAdd});\r\n    }\r\n\r\n    userSubmitInfo = async () =>{\r\n        var username = document.getElementsByClassName('userInputBox')[0].value;\r\n        var password = document.getElementsByClassName('userInputBox')[1].value;\r\n        if(this.state.isSigningUp === false){\r\n            await axios.post('https://52.151.90.27/api/signin/', {'username': username, 'password': password})\r\n            .then(res => {\r\n                if(res.data.message === 'no_user'){\r\n                    this.setState({ errorState: 1, errorMessage: 'Username or Password is Incorrect'})\r\n                }else if(res.data.message === 'user_successful'){\r\n                    localStorage.setItem('username', JSON.stringify(res.data.user));\r\n                    // console.log(JSON.parse((localStorage.getItem('username'))).genres);\r\n                    window.location.replace('https://52.151.90.27/app')\r\n                }\r\n            })\r\n        }else{\r\n            await axios.post('https://52.151.90.27/api/isUser/', {'username': username, 'password': password})\r\n            .then(res => {\r\n                if(res.data.message === 'user_already_exists'){\r\n                    this.setState({ errorState: 1, errorMessage: 'Username already exists'});\r\n                }else if(res.data.message === 'user_new'){\r\n                    this.setState({username: username, password: password});\r\n                    this.initializeSignUpSurvey();\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    userSubmitSurvey = async () =>{\r\n        await axios.post('https://52.151.90.27/api/signup/', {'username': this.state.username, 'password': this.state.password, 'genres': this.state.currentSelectedGenres})\r\n        .then(res =>{\r\n            if(res.data.status === 'success'){\r\n                window.location.replace('https://52.151.90.27/app')\r\n            }\r\n        })\r\n    }\r\n\r\n    handleGenreClick(index, genrename){\r\n        if(this.state.currentSelectedGenres.length < 3 && !this.state.currentSelectedGenres.includes(genrename)){\r\n            var currentStyleArray = this.state.genreClasses;\r\n            var currentGenreArray = this.state.currentSelectedGenres;\r\n            currentGenreArray.push(genrename);\r\n            currentStyleArray[index] = 'genreContainer genreSelected';\r\n            this.setState({genreClasses: currentStyleArray, currentSelectedGenres: currentGenreArray});\r\n        }else if(this.state.currentSelectedGenres.includes(genrename)){ //user selected the genre already\r\n            currentStyleArray = this.state.genreClasses;\r\n            currentStyleArray[index] = 'genreContainer';\r\n            currentGenreArray = this.state.currentSelectedGenres;\r\n            currentGenreArray = currentGenreArray.filter(item => item !== genrename);\r\n            this.setState({genreClasses: currentStyleArray, currentSelectedGenres: currentGenreArray});\r\n        }\r\n    }\r\n    \r\n    render(){\r\n        return(\r\n            <div id='registerApp'>\r\n                <div id='topContainer'>\r\n                    <div id='logoContainer'>\r\n                        <p><span id='firstPartLogo'>Tudor</span><span>Flix</span></p>\r\n                    </div>\r\n                    <div id='signUpLinkContainer'>\r\n                        {/* <p>Don't have an account? <span onClick={this.UsergotoSignUp} id='createAccountLink'>Create Account</span></p> */}\r\n                        {this.state.pageContent[this.state.pageContentState].topright}\r\n                    </div>\r\n                </div>\r\n                <div className={this.state.loginClass[this.state.loginClassState]}>\r\n                    <p id='loginTitle'>{this.state.pageContent[this.state.pageContentState].title}</p>\r\n                    <p id='sublogintitle'>{this.state.pageContent[this.state.pageContentState].subtitle}</p>\r\n                    <div className={this.state.errorID[this.state.errorState]}>\r\n                        <p id='errorTitle'>Error</p>\r\n                        <p>{this.state.errorMessage}</p>\r\n                    </div>\r\n                    <div id='formContainer'>\r\n                        <p className='InputTitleText'>Username:</p>\r\n                        <input onKeyPress={this.handleFormInput} type='username' className='userInputBox'></input>\r\n                        <div id='passwordForgotContainer'>\r\n                            <p className='InputTitleText'>Password:</p>\r\n                            <p id='forgotPasswordText'>Forgot Your Password?</p>\r\n                        </div>\r\n                        <input onKeyPress={this.handleFormInput} type='password' className='userInputBox'></input>\r\n                    </div>\r\n                    <div onClick={this.userSubmitInfo} id='loginButtonContainer'>\r\n                        <img className='loginButton' src={ArrowSVG} alt=''></img>\r\n                    </div>\r\n                    \r\n                </div>\r\n                <div id='surveyContainer'>\r\n                    <p id='surveyTitle'>What Are Your Favourite Genres? (Select Up To 3)</p>\r\n                    <div className={this.state.favouritesClass[this.state.favouritesClassState]}>\r\n                        <div onClick={() => this.handleGenreClick(0, 'drama')} className={this.state.genreClasses[0]}>\r\n                            <img className='genreImage' src={DramaSVG} alt=''></img>\r\n                            <p className='genreName'>Drama</p>\r\n                        </div>\r\n                        <div onClick={() => this.handleGenreClick(1, 'action')} className={this.state.genreClasses[1]}>\r\n                            <img className='genreImage' src={ActionSVG} alt=''></img>\r\n                            <p className='genreName'>Action</p>\r\n                        </div>\r\n                        <div onClick={() => this.handleGenreClick(2, 'adventure')} className={this.state.genreClasses[2]}>\r\n                            <img className='genreImage' src={AdventureSVG} alt=''></img>\r\n                            <p className='genreName'>Adventure</p>\r\n                        </div>\r\n                        <div onClick={() => this.handleGenreClick(3, 'comedy')} className={this.state.genreClasses[3]}>\r\n                            <img className='genreImage' src={ComedySVG} alt=''></img>\r\n                            <p className='genreName'>Comedy</p>\r\n                        </div>\r\n                        <div onClick={() => this.handleGenreClick(4, 'horror')} className={this.state.genreClasses[4]}>\r\n                            <img className='genreImage' src={HorrorSVG} alt=''></img>\r\n                            <p className='genreName'>Horror</p>\r\n                        </div>\r\n                        <div onClick={() => this.handleGenreClick(5, 'science-fiction')} className={this.state.genreClasses[5]}>\r\n                            <img className='genreImage' src={SciFiSVG} alt=''></img>\r\n                            <p className='genreName'>Science Fiction</p>\r\n                        </div>\r\n                    </div>\r\n                    <div onClick={this.userSubmitSurvey} id='surveyButtonContainer'>\r\n                        <img className='loginButton' src={ArrowSVG} alt=''></img>\r\n                    </div>\r\n                </div>\r\n                \r\n                <p id='allrightsText'>TudorFlix&#174; 2021 </p>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Register;\r\n"]},"metadata":{},"sourceType":"module"}