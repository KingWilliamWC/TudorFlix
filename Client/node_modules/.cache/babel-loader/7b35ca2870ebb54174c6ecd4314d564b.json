{"ast":null,"code":"import _regeneratorRuntime from\"/home/william/Documents/Projects/TudorFlix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/william/Documents/Projects/TudorFlix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/william/Documents/Projects/TudorFlix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/william/Documents/Projects/TudorFlix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/william/Documents/Projects/TudorFlix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/william/Documents/Projects/TudorFlix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import'./Bartop.css';import SearchSVG from\"./SVG/Search-Solid.svg\";import BellSVG from\"./SVG/Bell-Solid.svg\";import UserPicture from'./img/User-Profile.png';import MovieSlideUp from'./MovieFullTab';import SearchResultItem from'./SearchResultItem';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Bartop=/*#__PURE__*/function(_Component){_inherits(Bartop,_Component);var _super=_createSuper(Bartop);function Bartop(props){var _this;_classCallCheck(this,Bartop);_this=_super.call(this,props);_this.handleClickOutside=function(){console.log('click outside');if(!_this.state.userDropDownState===0){_this.setState({userDropDownState:0});}};_this.handleMovieClick=function(movieID){console.log(movieID);if(movieID!=='none'){_this.getMovieInfo(movieID);}else{if(_this.state.isOpen===0){_this.setState({isOpen:1});// if by some magic the user has done this\n}else{_this.setState({isOpen:0});_this.forceUpdate();}}};_this.OnUserClickProfile=function(){if(_this.state.userDropDownState===0){_this.setState({userDropDownState:1});}else{_this.setState({userDropDownState:0});}};_this.handleDropDownClick=function(index){index===0?_this.props.HandleTabClick(5):_this.props.signoutHandler();};_this.handleUserSearchEnter=function(event){if(event.key==='Enter'){var searchQuery=document.getElementById('searchBox').value;axios.post(_this.props.routes.search,{searchQuery:searchQuery}).then(function(res){// console.log(res.data.data[0].results);\nif(res.data.data.length>0){_this.setState({SearchMovies:res.data.data[0].results});}else{_this.setState({SearchMovies:[]});}});}};_this.handleSearchInputFocus=function(type){if(type==='focus'){_this.setState({SearchResultsState:1});}};_this.state={buttonStates:[],currentButtonIndex:0,userDropDownClasses:['dropdown-content-hide','dropdown-content-hide dropdown-content'],userDropDownState:0,SearchMovies:[],SearchMovieItems:[],SearchResultsClasses:['searchResultsContainerHide','searchResultsContainerHide searchResultsContainer'],SearchResultsState:0,slideUpClass:['movieFullTabContainer','movieFullTabContainerClosed'],isOpen:0,currentMovieData:{}};return _this;}_createClass(Bartop,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var buttonsStatesToAdd=[];for(var i=0;i<2;i++){buttonsStatesToAdd.push('nonActiveOption');}buttonsStatesToAdd[0]='activeOption';this.setState({buttonStates:buttonsStatesToAdd});var concernedElement=document.getElementsByClassName('dropdown-content-hide')[0];var searchContainer=document.getElementById('searchContainer');document.addEventListener(\"mousedown\",function(event){if(!concernedElement.contains(event.target)){if(_this2.state.userDropDownState===1){_this2.setState({userDropDownState:0});// hide profile dropdown\n}}if(!searchContainer.contains(event.target)){_this2.setState({SearchResultsState:0});// search results box\n}});}},{key:\"HandleButtonClick\",value:function HandleButtonClick(senderIndex){if(senderIndex!==this.state.currentButtonIndex){var tempButtonState=this.state.buttonStates;tempButtonState[senderIndex]='activeOption';tempButtonState[this.state.currentButtonIndex]='nonActiveOption';this.setState({buttonStates:tempButtonState,currentButtonIndex:senderIndex});}}},{key:\"getMovieInfo\",value:function(){var _getMovieInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(movieID){var _this3=this;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"\".concat(this.props.routes.movie,\"id=\").concat(movieID)).then(function(res){var statetoset=0;if(_this3.state.isOpen===0){statetoset=1;}_this3.setState({currentMovieData:res.data,isOpen:statetoset});return res;});case 2:case\"end\":return _context.stop();}}},_callee,this);}));function getMovieInfo(_x){return _getMovieInfo.apply(this,arguments);}return getMovieInfo;}()},{key:\"render\",value:function render(){var _this4=this;this.state.SearchMovieItems=[];if(this.state.SearchMovies.length>0){for(var i=0;i<this.state.SearchMovies.length;i++){this.state.SearchMovieItems.push(/*#__PURE__*/ // <div onClick={() => this.handleMovieClick(this.state.SearchMovies[i].id)} key={this.state.SearchMovies[i].id} className='searchResultItem'>\n//     <div className='searchResultItemContent'>\n//         <img className='searchResultItemImage' alt='' src={`https://image.tmdb.org/t/p/w1280/${this.state.SearchMovies[i].poster_path}`}></img>\n//         <p>{this.state.SearchMovies[i].title}</p>\n//     </div>\n// </div>\n_jsx(SearchResultItem,{handleMovieClick:this.handleMovieClick,data:this.state.SearchMovies[i]}));}}else{this.state.SearchMovieItems[0]=/*#__PURE__*/_jsx(\"p\",{id:\"NullResultsText\",children:\"No Results...\"});}return/*#__PURE__*/_jsxs(\"div\",{id:\"bartop\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"contentSelector\",children:[/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return _this4.HandleButtonClick(0);},className:\"contentOption\",children:/*#__PURE__*/_jsx(\"p\",{className:this.state.buttonStates[0],children:\"Movies\"})}),/*#__PURE__*/_jsx(\"div\",{id:\"seperator\"}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return _this4.HandleButtonClick(1);},className:\"contentOption\",children:/*#__PURE__*/_jsx(\"p\",{className:this.state.buttonStates[1],children:\"TV Series\"})})]}),/*#__PURE__*/_jsx(\"div\",{id:\"searchContainer\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"searchContainerContent\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"searchContainer\",children:[/*#__PURE__*/_jsx(\"img\",{id:\"searchIcon\",alt:\"\",src:SearchSVG}),/*#__PURE__*/_jsx(\"input\",{autoComplete:\"off\",onBlur:function onBlur(){return _this4.handleSearchInputFocus('blur');},onFocus:function onFocus(){return _this4.handleSearchInputFocus('focus');},onKeyPress:this.handleUserSearchEnter,placeholder:\"type to start a search...\",id:\"searchBox\"})]}),/*#__PURE__*/_jsx(\"div\",{className:this.state.SearchResultsClasses[this.state.SearchResultsState],children:/*#__PURE__*/_jsx(\"div\",{className:\"searchResultsContent\",children:this.state.SearchMovieItems})})]})}),/*#__PURE__*/_jsxs(\"div\",{id:\"userContainer\",children:[/*#__PURE__*/_jsx(\"img\",{alt:\"\",id:\"userBell\",src:BellSVG}),/*#__PURE__*/_jsx(\"img\",{onClick:function onClick(){return _this4.OnUserClickProfile();},id:\"userImg\",alt:\"\",src:UserPicture}),/*#__PURE__*/_jsxs(\"div\",{class:this.state.userDropDownClasses[this.state.userDropDownState],children:[/*#__PURE__*/_jsx(\"div\",{className:\"userNameContainer\",children:/*#__PURE__*/_jsx(\"p\",{className:\"userDropDownName\",children:JSON.parse(localStorage.getItem('username')).username})}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return _this4.handleDropDownClick(0);},className:\"dropdownOption\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Settings\"})}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return _this4.handleDropDownClick(1);},className:\"dropdownOption\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Sign Out\"})})]})]}),this.state.isOpen?/*#__PURE__*/_jsx(MovieSlideUp,{routes:this.props.routes,data:this.state.currentMovieData.data[0],clickHandler:this.handleMovieClick,slideupClass:this.state.slideUpClass[this.state.isOpen]}):'']});}}]);return Bartop;}(Component);export default Bartop;","map":{"version":3,"sources":["/home/william/Documents/Projects/TudorFlix/Client/src/Bartop.js"],"names":["React","Component","axios","UserPicture","MovieSlideUp","SearchResultItem","Bartop","props","handleClickOutside","console","log","state","userDropDownState","setState","handleMovieClick","movieID","getMovieInfo","isOpen","forceUpdate","OnUserClickProfile","handleDropDownClick","index","HandleTabClick","signoutHandler","handleUserSearchEnter","event","key","searchQuery","document","getElementById","value","post","routes","search","then","res","data","length","SearchMovies","results","handleSearchInputFocus","type","SearchResultsState","buttonStates","currentButtonIndex","userDropDownClasses","SearchMovieItems","SearchResultsClasses","slideUpClass","currentMovieData","buttonsStatesToAdd","i","push","concernedElement","getElementsByClassName","searchContainer","addEventListener","contains","target","senderIndex","tempButtonState","get","movie","statetoset","HandleButtonClick","SearchSVG","BellSVG","JSON","parse","localStorage","getItem","username"],"mappings":"69BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAO,cAAP,C,wFAKA,MAAOC,CAAAA,WAAP,KAAwB,wBAAxB,CAEA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oBAA7B,C,2FAEMC,CAAAA,M,gGACF,gBAAYC,KAAZ,CAAkB,wCACd,uBAAMA,KAAN,EADc,MAkDlBC,kBAlDkB,CAkDG,UAAM,CACvBC,OAAO,CAACC,GAAR,CAAY,eAAZ,EACA,GAAG,CAAC,MAAKC,KAAL,CAAWC,iBAAZ,GAAkC,CAArC,CAAuC,CACnC,MAAKC,QAAL,CAAc,CAACD,iBAAiB,CAAE,CAApB,CAAd,EACH,CACJ,CAvDiB,OAqElBE,gBArEkB,CAqEC,SAACC,OAAD,CAAa,CAC5BN,OAAO,CAACC,GAAR,CAAYK,OAAZ,EACA,GAAGA,OAAO,GAAK,MAAf,CAAsB,CAClB,MAAKC,YAAL,CAAkBD,OAAlB,EACH,CAFD,IAEK,CACD,GAAG,MAAKJ,KAAL,CAAWM,MAAX,GAAsB,CAAzB,CAA2B,CACvB,MAAKJ,QAAL,CAAc,CAACI,MAAM,CAAE,CAAT,CAAd,EAA4B;AAC/B,CAFD,IAEK,CACD,MAAKJ,QAAL,CAAc,CAACI,MAAM,CAAE,CAAT,CAAd,EACA,MAAKC,WAAL,GACH,CACJ,CACJ,CAjFiB,OAmFlBC,kBAnFkB,CAmFG,UAAM,CACvB,GAAG,MAAKR,KAAL,CAAWC,iBAAX,GAAiC,CAApC,CAAsC,CAClC,MAAKC,QAAL,CAAc,CAACD,iBAAiB,CAAE,CAApB,CAAd,EACH,CAFD,IAEK,CACD,MAAKC,QAAL,CAAc,CAACD,iBAAiB,CAAE,CAApB,CAAd,EACH,CACJ,CAzFiB,OA2FlBQ,mBA3FkB,CA2FI,SAACC,KAAD,CAAW,CAC7BA,KAAK,GAAK,CAAV,CAAc,MAAKd,KAAL,CAAWe,cAAX,CAA0B,CAA1B,CAAd,CAA6C,MAAKf,KAAL,CAAWgB,cAAX,EAA7C,CACH,CA7FiB,OA+FlBC,qBA/FkB,CA+FM,SAACC,KAAD,CAAW,CAC/B,GAAGA,KAAK,CAACC,GAAN,GAAc,OAAjB,CAAyB,CACrB,GAAIC,CAAAA,WAAW,CAAGC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAAvD,CACA5B,KAAK,CAAC6B,IAAN,CAAW,MAAKxB,KAAL,CAAWyB,MAAX,CAAkBC,MAA7B,CAAqC,CAACN,WAAW,CAAEA,WAAd,CAArC,EACCO,IADD,CACM,SAAAC,GAAG,CAAI,CACT;AACA,GAAGA,GAAG,CAACC,IAAJ,CAASA,IAAT,CAAcC,MAAd,CAAuB,CAA1B,CAA4B,CACxB,MAAKxB,QAAL,CAAc,CAACyB,YAAY,CAAEH,GAAG,CAACC,IAAJ,CAASA,IAAT,CAAc,CAAd,EAAiBG,OAAhC,CAAd,EACH,CAFD,IAGI,CACA,MAAK1B,QAAL,CAAc,CAACyB,YAAY,CAAE,EAAf,CAAd,EACH,CACJ,CATD,EAUH,CACJ,CA7GiB,OA+GlBE,sBA/GkB,CA+GO,SAACC,IAAD,CAAS,CAC9B,GAAGA,IAAI,GAAK,OAAZ,CAAoB,CAChB,MAAK5B,QAAL,CAAc,CAAC6B,kBAAkB,CAAG,CAAtB,CAAd,EACH,CACJ,CAnHiB,CAEd,MAAK/B,KAAL,CAAa,CACTgC,YAAY,CAAE,EADL,CAETC,kBAAkB,CAAE,CAFX,CAGTC,mBAAmB,CAAE,CAAC,uBAAD,CAA0B,wCAA1B,CAHZ,CAITjC,iBAAiB,CAAE,CAJV,CAKT0B,YAAY,CAAE,EALL,CAMTQ,gBAAgB,CAAE,EANT,CAOTC,oBAAoB,CAAE,CAAC,4BAAD,CAA+B,mDAA/B,CAPb,CAQTL,kBAAkB,CAAE,CARX,CASTM,YAAY,CAAE,CAAC,uBAAD,CAA0B,6BAA1B,CATL,CAUT/B,MAAM,CAAE,CAVC,CAWTgC,gBAAgB,CAAE,EAXT,CAAb,CAFc,aAejB,C,oDAED,4BAAmB,iBACf,GAAIC,CAAAA,kBAAkB,CAAG,EAAzB,CACA,IAAI,GAAIC,CAAAA,CAAC,CAAG,CAAZ,CAAeA,CAAC,CAAG,CAAnB,CAAsBA,CAAC,EAAvB,CAA0B,CACtBD,kBAAkB,CAACE,IAAnB,CAAwB,iBAAxB,EACH,CACDF,kBAAkB,CAAC,CAAD,CAAlB,CAAwB,cAAxB,CACA,KAAKrC,QAAL,CAAc,CACV8B,YAAY,CAAEO,kBADJ,CAAd,EAIA,GAAMG,CAAAA,gBAAgB,CAAGzB,QAAQ,CAAC0B,sBAAT,CAAgC,uBAAhC,EAAyD,CAAzD,CAAzB,CACA,GAAMC,CAAAA,eAAe,CAAG3B,QAAQ,CAACC,cAAT,CAAwB,iBAAxB,CAAxB,CACAD,QAAQ,CAAC4B,gBAAT,CAA0B,WAA1B,CAAuC,SAAC/B,KAAD,CAAW,CAC9C,GAAI,CAAC4B,gBAAgB,CAACI,QAAjB,CAA0BhC,KAAK,CAACiC,MAAhC,CAAL,CAA8C,CAC1C,GAAG,MAAI,CAAC/C,KAAL,CAAWC,iBAAX,GAAiC,CAApC,CAAsC,CAClC,MAAI,CAACC,QAAL,CAAc,CAACD,iBAAiB,CAAE,CAApB,CAAd,EAAuC;AAC1C,CACJ,IAAG,CAAC2C,eAAe,CAACE,QAAhB,CAAyBhC,KAAK,CAACiC,MAA/B,CAAJ,CAA2C,CACxC,MAAI,CAAC7C,QAAL,CAAc,CAAC6B,kBAAkB,CAAG,CAAtB,CAAd,EAAwC;AAC3C,CACJ,CARD,EASH,C,iCAED,2BAAkBiB,WAAlB,CAA8B,CAC1B,GAAGA,WAAW,GAAK,KAAKhD,KAAL,CAAWiC,kBAA9B,CAAiD,CAC7C,GAAIgB,CAAAA,eAAe,CAAG,KAAKjD,KAAL,CAAWgC,YAAjC,CACAiB,eAAe,CAACD,WAAD,CAAf,CAA+B,cAA/B,CACAC,eAAe,CAAC,KAAKjD,KAAL,CAAWiC,kBAAZ,CAAf,CAAiD,iBAAjD,CACA,KAAK/B,QAAL,CAAc,CAAC8B,YAAY,CAAEiB,eAAf,CAAgChB,kBAAkB,CAAEe,WAApD,CAAd,EACH,CAEJ,C,iHASD,iBAAmB5C,OAAnB,wJACUb,CAAAA,KAAK,CAAC2D,GAAN,WAAa,KAAKtD,KAAL,CAAWyB,MAAX,CAAkB8B,KAA/B,eAA0C/C,OAA1C,GACDmB,IADC,CACI,SAAAC,GAAG,CAAI,CACT,GAAI4B,CAAAA,UAAU,CAAG,CAAjB,CACA,GAAG,MAAI,CAACpD,KAAL,CAAWM,MAAX,GAAsB,CAAzB,CAA2B,CACvB8C,UAAU,CAAG,CAAb,CACH,CACD,MAAI,CAAClD,QAAL,CAAc,CAACoC,gBAAgB,CAAEd,GAAG,CAACC,IAAvB,CAA6BnB,MAAM,CAAE8C,UAArC,CAAd,EACA,MAAO5B,CAAAA,GAAP,CACH,CARC,CADV,4D,sHA2DA,iBAAQ,iBACJ,KAAKxB,KAAL,CAAWmC,gBAAX,CAA8B,EAA9B,CACA,GAAG,KAAKnC,KAAL,CAAW2B,YAAX,CAAwBD,MAAxB,CAAiC,CAApC,CAAsC,CAClC,IAAI,GAAIc,CAAAA,CAAC,CAAG,CAAZ,CAAeA,CAAC,CAAG,KAAKxC,KAAL,CAAW2B,YAAX,CAAwBD,MAA3C,CAAmDc,CAAC,EAApD,CAAuD,CACnD,KAAKxC,KAAL,CAAWmC,gBAAX,CAA4BM,IAA5B,eACI;AACA;AACA;AACA;AACA;AACA;AACA,KAAC,gBAAD,EAAkB,gBAAgB,CAAE,KAAKtC,gBAAzC,CAA2D,IAAI,CAAE,KAAKH,KAAL,CAAW2B,YAAX,CAAwBa,CAAxB,CAAjE,EAPJ,EASH,CACJ,CAZD,IAYK,CACD,KAAKxC,KAAL,CAAWmC,gBAAX,CAA4B,CAA5B,eAAiC,UAAG,EAAE,CAAC,iBAAN,2BAAjC,CACH,CAED,mBACI,aAAK,EAAE,CAAC,QAAR,wBACI,aAAK,EAAE,CAAC,iBAAR,wBACI,YAAK,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACkB,iBAAL,CAAuB,CAAvB,CAAN,EAAd,CAA+C,SAAS,CAAC,eAAzD,uBACI,UAAG,SAAS,CAAE,KAAKrD,KAAL,CAAWgC,YAAX,CAAwB,CAAxB,CAAd,oBADJ,EADJ,cAII,YAAK,EAAE,CAAC,WAAR,EAJJ,cAKI,YAAK,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACqB,iBAAL,CAAuB,CAAvB,CAAN,EAAd,CAA+C,SAAS,CAAC,eAAzD,uBACI,UAAG,SAAS,CAAE,KAAKrD,KAAL,CAAWgC,YAAX,CAAwB,CAAxB,CAAd,uBADJ,EALJ,GADJ,cAUI,YAAK,EAAE,CAAC,iBAAR,uBACI,aAAK,EAAE,CAAC,wBAAR,wBACI,aAAK,EAAE,CAAC,iBAAR,wBACI,YAAK,EAAE,CAAC,YAAR,CAAqB,GAAG,CAAC,EAAzB,CAA4B,GAAG,CAAEsB,SAAjC,EADJ,cAEI,cAAO,YAAY,CAAC,KAApB,CAA0B,MAAM,CAAE,wBAAM,CAAA,MAAI,CAACzB,sBAAL,CAA4B,MAA5B,CAAN,EAAlC,CAA6E,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACA,sBAAL,CAA4B,OAA5B,CAAN,EAAtF,CAAkI,UAAU,CAAE,KAAKhB,qBAAnJ,CAA0K,WAAW,CAAC,2BAAtL,CAAkN,EAAE,CAAC,WAArN,EAFJ,GADJ,cAKI,YAAK,SAAS,CAAE,KAAKb,KAAL,CAAWoC,oBAAX,CAAgC,KAAKpC,KAAL,CAAW+B,kBAA3C,CAAhB,uBACI,YAAK,SAAS,CAAC,sBAAf,UAaK,KAAK/B,KAAL,CAAWmC,gBAbhB,EADJ,EALJ,GADJ,EAVJ,cAoCI,aAAK,EAAE,CAAC,eAAR,wBACI,YAAK,GAAG,CAAC,EAAT,CAAY,EAAE,CAAC,UAAf,CAA0B,GAAG,CAAEoB,OAA/B,EADJ,cAEI,YAAM,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC/C,kBAAL,EAAN,EAAf,CAAgD,EAAE,CAAC,SAAnD,CAA6D,GAAG,CAAC,EAAjE,CAAoE,GAAG,CAAEhB,WAAzE,EAFJ,cAGI,aAAM,KAAK,CAAE,KAAKQ,KAAL,CAAWkC,mBAAX,CAA+B,KAAKlC,KAAL,CAAWC,iBAA1C,CAAb,wBACI,YAAK,SAAS,CAAC,mBAAf,uBACI,UAAG,SAAS,CAAC,kBAAb,UAAiCuD,IAAI,CAACC,KAAL,CAAYC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAZ,EAA+CC,QAAhF,EADJ,EADJ,cAII,YAAK,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACnD,mBAAL,CAAyB,CAAzB,CAAN,EAAd,CAAiD,SAAS,CAAC,gBAA3D,uBACI,+BADJ,EAJJ,cAOI,YAAK,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACA,mBAAL,CAAyB,CAAzB,CAAN,EAAd,CAAiD,SAAS,CAAC,gBAA3D,uBACI,+BADJ,EAPJ,GAHJ,GApCJ,CAmDK,KAAKT,KAAL,CAAWM,MAAX,cAAoB,KAAC,YAAD,EAAc,MAAM,CAAE,KAAKV,KAAL,CAAWyB,MAAjC,CAAyC,IAAI,CAAE,KAAKrB,KAAL,CAAWsC,gBAAX,CAA4Bb,IAA5B,CAAiC,CAAjC,CAA/C,CAAoF,YAAY,CAAE,KAAKtB,gBAAvG,CAAyH,YAAY,CAAE,KAAKH,KAAL,CAAWqC,YAAX,CAAwB,KAAKrC,KAAL,CAAWM,MAAnC,CAAvI,EAApB,CAA2M,EAnDhN,GADJ,CAuDH,C,oBA9LgBhB,S,EAiMrB,cAAeK,CAAAA,MAAf","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n\nimport './Bartop.css';\n\nimport SearchSVG from './SVG/Search-Solid.svg';\nimport BellSVG from './SVG/Bell-Solid.svg';\n\nimport UserPicture from './img/User-Profile.png';\n\nimport MovieSlideUp from './MovieFullTab';\nimport SearchResultItem from './SearchResultItem';\n\nclass Bartop extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            buttonStates: [],\n            currentButtonIndex: 0,\n            userDropDownClasses: ['dropdown-content-hide', 'dropdown-content-hide dropdown-content'],\n            userDropDownState: 0,\n            SearchMovies: [],\n            SearchMovieItems: [],\n            SearchResultsClasses: ['searchResultsContainerHide', 'searchResultsContainerHide searchResultsContainer'],\n            SearchResultsState: 0,\n            slideUpClass: ['movieFullTabContainer', 'movieFullTabContainerClosed'],\n            isOpen: 0,\n            currentMovieData: {},\n        }\n    }\n\n    componentDidMount(){\n        var buttonsStatesToAdd = []\n        for(var i = 0; i < 2; i++){\n            buttonsStatesToAdd.push('nonActiveOption');\n        }\n        buttonsStatesToAdd[0] = 'activeOption';\n        this.setState({\n            buttonStates: buttonsStatesToAdd\n        })\n\n        const concernedElement = document.getElementsByClassName('dropdown-content-hide')[0]\n        const searchContainer = document.getElementById('searchContainer')\n        document.addEventListener(\"mousedown\", (event) => {\n            if (!concernedElement.contains(event.target)) {\n                if(this.state.userDropDownState === 1){\n                    this.setState({userDropDownState: 0}); // hide profile dropdown\n                }\n            }if(!searchContainer.contains(event.target)){\n                this.setState({SearchResultsState : 0}) // search results box\n            }\n        });\n    }\n\n    HandleButtonClick(senderIndex){\n        if(senderIndex !== this.state.currentButtonIndex){\n            var tempButtonState = this.state.buttonStates;\n            tempButtonState[senderIndex] = 'activeOption';\n            tempButtonState[this.state.currentButtonIndex] = 'nonActiveOption';\n            this.setState({buttonStates: tempButtonState, currentButtonIndex: senderIndex})\n        }\n\n    }\n\n    handleClickOutside = () => {\n        console.log('click outside');\n        if(!this.state.userDropDownState === 0){\n            this.setState({userDropDownState: 0});\n        }\n    }\n\n    async getMovieInfo(movieID){\n        await axios.get(`${this.props.routes.movie}id=${movieID}`)\n            .then(res => {\n                var statetoset = 0;\n                if(this.state.isOpen === 0){\n                    statetoset = 1;\n                }\n                this.setState({currentMovieData: res.data, isOpen: statetoset});\n                return res;\n            })\n    }\n\n    handleMovieClick = (movieID) => {\n        console.log(movieID);\n        if(movieID !== 'none'){\n            this.getMovieInfo(movieID)\n        }else{\n            if(this.state.isOpen === 0){\n                this.setState({isOpen: 1}); // if by some magic the user has done this\n            }else{\n                this.setState({isOpen: 0});\n                this.forceUpdate();\n            }\n        }\n    }\n\n    OnUserClickProfile = () => {\n        if(this.state.userDropDownState === 0){\n            this.setState({userDropDownState: 1});\n        }else{\n            this.setState({userDropDownState: 0});\n        }\n    }\n\n    handleDropDownClick = (index) => {\n        index === 0 ? this.props.HandleTabClick(5) : this.props.signoutHandler();\n    }\n\n    handleUserSearchEnter = (event) => {\n        if(event.key === 'Enter'){\n            var searchQuery = document.getElementById('searchBox').value;\n            axios.post(this.props.routes.search, {searchQuery: searchQuery})\n            .then(res => {\n                // console.log(res.data.data[0].results);\n                if(res.data.data.length > 0){\n                    this.setState({SearchMovies: res.data.data[0].results})\n                }\n                else{\n                    this.setState({SearchMovies: []})\n                }\n            })\n        }\n    }\n\n    handleSearchInputFocus = (type) =>{\n        if(type === 'focus'){\n            this.setState({SearchResultsState : 1})\n        }\n    }\n    render(){\n        this.state.SearchMovieItems = []\n        if(this.state.SearchMovies.length > 0){\n            for(var i = 0; i < this.state.SearchMovies.length; i++){\n                this.state.SearchMovieItems.push(\n                    // <div onClick={() => this.handleMovieClick(this.state.SearchMovies[i].id)} key={this.state.SearchMovies[i].id} className='searchResultItem'>\n                    //     <div className='searchResultItemContent'>\n                    //         <img className='searchResultItemImage' alt='' src={`https://image.tmdb.org/t/p/w1280/${this.state.SearchMovies[i].poster_path}`}></img>\n                    //         <p>{this.state.SearchMovies[i].title}</p>\n                    //     </div>\n                    // </div>\n                    <SearchResultItem handleMovieClick={this.handleMovieClick} data={this.state.SearchMovies[i]} />\n                )\n            }\n        }else{\n            this.state.SearchMovieItems[0] = <p id='NullResultsText'>No Results...</p>\n        }\n\n        return(\n            <div id='bartop'>\n                <div id='contentSelector'>\n                    <div onClick={() => this.HandleButtonClick(0)} className='contentOption'>\n                        <p className={this.state.buttonStates[0]}>Movies</p>\n                    </div>\n                    <div id='seperator'></div>\n                    <div onClick={() => this.HandleButtonClick(1)} className='contentOption'>\n                        <p className={this.state.buttonStates[1]}>TV Series</p>\n                    </div>\n                </div>\n                <div id='searchContainer'>\n                    <div id='searchContainerContent'>\n                        <div id='searchContainer'>\n                            <img id='searchIcon' alt='' src={SearchSVG}></img>\n                            <input autoComplete=\"off\" onBlur={() => this.handleSearchInputFocus('blur')} onFocus={() => this.handleSearchInputFocus('focus')} onKeyPress={this.handleUserSearchEnter} placeholder='type to start a search...' id='searchBox'></input>\n                        </div>\n                        <div className={this.state.SearchResultsClasses[this.state.SearchResultsState]}>\n                            <div className='searchResultsContent'>\n                                {/* <div className='searchResultItem'>\n                                    <div className='searchResultItemContent'>\n                                        <img className='searchResultItemImage' alt='' src='https://image.tmdb.org/t/p/w1280//qAZ0pzat24kLdO3o8ejmbLxyOac.jpg'></img>\n                                        <p>Black Widow</p>\n                                    </div>\n                                </div>\n                                <div className='searchResultItem'>\n                                    <div className='searchResultItemContent'>\n                                        <img className='searchResultItemImage' alt='' src='https://image.tmdb.org/t/p/w1280//qAZ0pzat24kLdO3o8ejmbLxyOac.jpg'></img>\n                                        <p>Black Widow</p>\n                                    </div>\n                                </div> */}\n                                {this.state.SearchMovieItems}\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n                <div id='userContainer'>\n                    <img alt='' id='userBell' src={BellSVG}></img>\n                    <img  onClick={() => this.OnUserClickProfile()} id='userImg' alt='' src={UserPicture}></img>\n                    <div  class={this.state.userDropDownClasses[this.state.userDropDownState]}>\n                        <div className='userNameContainer'>\n                            <p className='userDropDownName'>{JSON.parse((localStorage.getItem('username'))).username}</p>\n                        </div>\n                        <div onClick={() => this.handleDropDownClick(0)} className='dropdownOption'>\n                            <p>Settings</p>\n                        </div>\n                        <div onClick={() => this.handleDropDownClick(1)} className='dropdownOption'>\n                            <p>Sign Out</p>\n                        </div>\n                    </div>\n                </div>\n                {this.state.isOpen ? <MovieSlideUp routes={this.props.routes} data={this.state.currentMovieData.data[0]} clickHandler={this.handleMovieClick} slideupClass={this.state.slideUpClass[this.state.isOpen]}/> : ''}\n            </div>\n        )\n    }\n}\n\nexport default Bartop;"]},"metadata":{},"sourceType":"module"}