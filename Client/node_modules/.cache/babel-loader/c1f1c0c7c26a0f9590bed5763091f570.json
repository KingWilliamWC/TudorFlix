{"ast":null,"code":"import _classCallCheck from\"C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import'./MovieFullTab.css';import TrailerVideo from'./TrailerVideo';import CircleSVG from\"./SVG/Circle-Solid.svg\";import StarSVG from\"./SVG/Star-Solid.svg\";import HeartSVG from\"./SVG/Heart-Solid.svg\";import PlaySVG from\"./SVG/Play-Solid.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MovieFullTab=/*#__PURE__*/function(_Component){_inherits(MovieFullTab,_Component);var _super=_createSuper(MovieFullTab);function MovieFullTab(props){var _this;_classCallCheck(this,MovieFullTab);_this=_super.call(this,props);_this.userPlay=function(){var trailers=[];console.log(_this.props.data.videos.results);for(var i=0;i<_this.props.data.videos.results.length;i++){if(_this.props.data.videos.results[i].type==='Trailer'){trailers.push(_this.props.data.videos.results[i].key);}}// console.log(trailers[0]);\n_this.setState({video:true,key:trailers[0]});};_this.userExitPlay=function(){_this.setState({video:false});};_this.HandleLikeClick=function(){var user=JSON.parse(localStorage.getItem('username'));if(_this.state.heartState===0&&!user.favouritesID.includes(_this.props.data.id)){_this.setState({heartState:1});// user add to favourites\nconsole.log('movie id on like change add: '+_this.props.data.id+', '+_this.state.movieIDIndex);user.favourites.push(_this.props.data);user.favouritesID.push(_this.props.data.id);localStorage.setItem('username',JSON.stringify(user));axios.post(_this.props.routes.update,{saveData:user}).then(function(res){if(res.data.status==='success'){//success updating\nlocalStorage.removeItem('username');localStorage.setItem('username',JSON.stringify(res.data.message));var alreadyLiked=_this.state.userAlreadyLiked;alreadyLiked[0]=true;_this.setState({userAlreadyLiked:alreadyLiked});console.log(_this.state.userAlreadyLiked);}else{//failure updating\n}});}else if(user.favouritesID.includes(_this.props.data.id)){_this.setState({heartState:0});var alreadyLiked=_this.state.userAlreadyLiked;alreadyLiked[1]=true;_this.setState({userAlreadyLiked:alreadyLiked});console.log('movie id on like change remove: '+_this.props.data.id+', '+_this.state.movieIDIndex);// user delete from favourites\nif(_this.state.userAlreadyLiked[0]===true&&_this.state.userAlreadyLiked[1]===true){user.favourites.splice(user.favourites.length-1,1);user.favouritesID.splice(user.favouritesID.length-1,1);console.log('not today buddy!!!');}else{user.favourites.splice(_this.state.movieIDIndex,1);user.favouritesID.splice(_this.state.movieIDIndex,1);}localStorage.setItem('username',JSON.stringify(user));axios.post(_this.props.routes.update,{saveData:user}).then(function(res){if(res.data.status==='success'){//success updating\nlocalStorage.removeItem('username');localStorage.setItem('username',JSON.stringify(res.data.message));}else{//failure updating\n}});}};_this.state={genreMap:{\"genres\":[{\"id\":28,\"name\":\"Action\"},{\"id\":12,\"name\":\"Adventure\"},{\"id\":16,\"name\":\"Animation\"},{\"id\":35,\"name\":\"Comedy\"},{\"id\":80,\"name\":\"Crime\"},{\"id\":99,\"name\":\"Documentary\"},{\"id\":18,\"name\":\"Drama\"},{\"id\":10751,\"name\":\"Family\"},{\"id\":14,\"name\":\"Fantasy\"},{\"id\":36,\"name\":\"History\"},{\"id\":27,\"name\":\"Horror\"},{\"id\":10402,\"name\":\"Music\"},{\"id\":9648,\"name\":\"Mystery\"},{\"id\":10749,\"name\":\"Romance\"},{\"id\":878,\"name\":\"Science Fiction\"},{\"id\":10770,\"name\":\"TV Movie\"},{\"id\":53,\"name\":\"Thriller\"},{\"id\":10752,\"name\":\"War\"},{\"id\":37,\"name\":\"Western\"}]},genres:[],video:false,key:'',heartClass:['movieFullInfoLikeButton','movieFullInfoLikeButton movieFullInfoLikeButtonLiked'],heartState:0,movieIDIndex:0,userAlreadyLiked:[false,false]};return _this;}_createClass(MovieFullTab,[{key:\"componentDidMount\",value:function componentDidMount(){var genresToMap=[];for(var i=0;i<2;i++){for(var x=0;x<this.state.genreMap.genres.length;x++){if(this.state.genreMap.genres[x].id===this.props.data.genres[i].id){genresToMap.push(this.state.genreMap.genres[x].name);}}}if(JSON.parse(localStorage.getItem('username')).favouritesID.includes(this.props.data.id)){var movieIDIndex=JSON.parse(localStorage.getItem('username')).favouritesID.indexOf(this.props.data.id,0);console.log(movieIDIndex,this.props.data.id);this.setState({genres:genresToMap,heartState:1,movieIDIndex:movieIDIndex});}else{this.setState({genres:genresToMap});}}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{id:this.props.slideupClass,children:[this.state.video?/*#__PURE__*/_jsx(TrailerVideo,{data:this.state.key,clickHandler:this.userExitPlay}):'',/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return _this2.props.clickHandler('none');},id:\"fullscreenTabContainer\"}),/*#__PURE__*/_jsx(\"div\",{id:\"fullscreenSurroundingContainer\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"fullscreenContent\",children:[/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return _this2.props.clickHandler('none');},className:\"escape_container\",children:/*#__PURE__*/_jsx(\"p\",{children:\"X\"})}),/*#__PURE__*/_jsxs(\"div\",{id:\"movieInfoContainer\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"movieImageContainer\",children:/*#__PURE__*/_jsx(\"img\",{alt:\"\",src:\"https://image.tmdb.org/t/p/w1280\".concat(this.props.data.poster_path)})}),/*#__PURE__*/_jsxs(\"div\",{id:\"movieFullInfoContainer\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"movieFullInfoTitle\",children:this.props.data.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"movieFullMetricsContainer\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"movieFullInfoText\",children:\"15\"}),/*#__PURE__*/_jsx(\"p\",{className:\"movieFullInfoText movieFullInfoRelease\",children:this.props.data.release_date.substring(0,4)}),/*#__PURE__*/_jsxs(\"div\",{id:\"fullGenreContainer\",children:[/*#__PURE__*/_jsx(\"p\",{children:this.state.genres[0]}),/*#__PURE__*/_jsx(\"img\",{alt:\"\",className:\"seperator-side\",src:CircleSVG}),/*#__PURE__*/_jsx(\"p\",{id:\"secondGenre\",children:this.state.genres[1]})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"movieFullRatingsContainer\",children:[/*#__PURE__*/_jsx(\"img\",{id:\"featuredStarIcon\",alt:\"\",src:StarSVG}),/*#__PURE__*/_jsx(\"p\",{children:this.props.data.vote_average})]})]}),/*#__PURE__*/_jsx(\"div\",{id:\"fullMovieInfoOverviewContainer\",children:/*#__PURE__*/_jsx(\"p\",{children:this.props.data.overview})}),/*#__PURE__*/_jsxs(\"div\",{id:\"movieFullInfoButtonsContainer\",children:[/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return _this2.HandleLikeClick();},className:this.state.heartClass[this.state.heartState],children:/*#__PURE__*/_jsx(\"img\",{alt:\"\",src:HeartSVG})}),/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return _this2.userPlay();},className:\"movieFullInfoPlayButton\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Watch\"}),/*#__PURE__*/_jsx(\"img\",{alt:\"\",src:PlaySVG})]})]})]})]})]})})]});}}]);return MovieFullTab;}(Component);export default MovieFullTab;","map":{"version":3,"sources":["C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/src/MovieFullTab.js"],"names":["React","Component","axios","TrailerVideo","MovieFullTab","props","userPlay","trailers","console","log","data","videos","results","i","length","type","push","key","setState","video","userExitPlay","HandleLikeClick","user","JSON","parse","localStorage","getItem","state","heartState","favouritesID","includes","id","movieIDIndex","favourites","setItem","stringify","post","routes","update","saveData","then","res","status","removeItem","message","alreadyLiked","userAlreadyLiked","splice","genreMap","genres","heartClass","genresToMap","x","name","indexOf","slideupClass","clickHandler","poster_path","title","release_date","substring","CircleSVG","StarSVG","vote_average","overview","HeartSVG","PlaySVG"],"mappings":"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","sourcesContent":["import React, { Component} from 'react';\r\nimport axios from 'axios';\r\n\r\nimport './MovieFullTab.css';\r\n\r\nimport TrailerVideo from './TrailerVideo';\r\n\r\nimport CircleSVG from './SVG/Circle-Solid.svg';\r\nimport StarSVG from './SVG/Star-Solid.svg';\r\nimport HeartSVG from './SVG/Heart-Solid.svg';\r\nimport PlaySVG from './SVG/Play-Solid.svg';\r\n\r\nclass MovieFullTab extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            genreMap: {\"genres\": [\r\n                {\r\n                  \"id\": 28,\r\n                  \"name\": \"Action\"\r\n                },\r\n                {\r\n                  \"id\": 12,\r\n                  \"name\": \"Adventure\"\r\n                },\r\n                {\r\n                  \"id\": 16,\r\n                  \"name\": \"Animation\"\r\n                },\r\n                {\r\n                  \"id\": 35,\r\n                  \"name\": \"Comedy\"\r\n                },\r\n                {\r\n                  \"id\": 80,\r\n                  \"name\": \"Crime\"\r\n                },\r\n                {\r\n                  \"id\": 99,\r\n                  \"name\": \"Documentary\"\r\n                },\r\n                {\r\n                  \"id\": 18,\r\n                  \"name\": \"Drama\"\r\n                },\r\n                {\r\n                  \"id\": 10751,\r\n                  \"name\": \"Family\"\r\n                },\r\n                {\r\n                  \"id\": 14,\r\n                  \"name\": \"Fantasy\"\r\n                },\r\n                {\r\n                  \"id\": 36,\r\n                  \"name\": \"History\"\r\n                },\r\n                {\r\n                  \"id\": 27,\r\n                  \"name\": \"Horror\"\r\n                },\r\n                {\r\n                  \"id\": 10402,\r\n                  \"name\": \"Music\"\r\n                },\r\n                {\r\n                  \"id\": 9648,\r\n                  \"name\": \"Mystery\"\r\n                },\r\n                {\r\n                  \"id\": 10749,\r\n                  \"name\": \"Romance\"\r\n                },\r\n                {\r\n                  \"id\": 878,\r\n                  \"name\": \"Science Fiction\"\r\n                },\r\n                {\r\n                  \"id\": 10770,\r\n                  \"name\": \"TV Movie\"\r\n                },\r\n                {\r\n                  \"id\": 53,\r\n                  \"name\": \"Thriller\"\r\n                },\r\n                {\r\n                  \"id\": 10752,\r\n                  \"name\": \"War\"\r\n                },\r\n                {\r\n                  \"id\": 37,\r\n                  \"name\": \"Western\"\r\n                }\r\n              ]\r\n            },\r\n            genres: [],\r\n            video: false,\r\n            key: '',\r\n            heartClass: ['movieFullInfoLikeButton', 'movieFullInfoLikeButton movieFullInfoLikeButtonLiked'],\r\n            heartState: 0,\r\n            movieIDIndex: 0,\r\n            userAlreadyLiked: [false, false],\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        var genresToMap = [];\r\n        for(var i = 0; i < 2; i++){\r\n            for(var x = 0; x < this.state.genreMap.genres.length; x++){\r\n                if(this.state.genreMap.genres[x].id === this.props.data.genres[i].id){\r\n                    genresToMap.push(this.state.genreMap.genres[x].name);\r\n                }\r\n            }\r\n        }\r\n        if(JSON.parse((localStorage.getItem('username'))).favouritesID.includes(this.props.data.id)){\r\n            var movieIDIndex = JSON.parse((localStorage.getItem('username'))).favouritesID.indexOf(this.props.data.id, 0)\r\n            console.log(movieIDIndex, this.props.data.id);\r\n            this.setState({genres: genresToMap, heartState: 1, movieIDIndex: movieIDIndex});\r\n        }else{\r\n            this.setState({genres: genresToMap});\r\n        }\r\n        \r\n    }\r\n    \r\n    userPlay = () => {\r\n        var trailers = []\r\n        console.log(this.props.data.videos.results);\r\n        for(var i = 0; i < this.props.data.videos.results.length; i++){\r\n            if(this.props.data.videos.results[i].type === 'Trailer'){\r\n                trailers.push(this.props.data.videos.results[i].key)\r\n            }\r\n        }\r\n        // console.log(trailers[0]);\r\n        this.setState({video: true, key: trailers[0]});\r\n    }\r\n\r\n    userExitPlay = () => {\r\n        this.setState({video: false});\r\n    }\r\n\r\n    HandleLikeClick = () => {\r\n        var user = JSON.parse((localStorage.getItem('username')));\r\n         \r\n        if(this.state.heartState === 0 && !user.favouritesID.includes(this.props.data.id)){\r\n            this.setState({heartState: 1});\r\n            // user add to favourites\r\n            console.log('movie id on like change add: ' + this.props.data.id + ', ' + this.state.movieIDIndex);  \r\n            user.favourites.push(this.props.data);\r\n            user.favouritesID.push(this.props.data.id);\r\n            localStorage.setItem('username', JSON.stringify(user));\r\n            axios.post(this.props.routes.update, {saveData: user})\r\n            .then(res => {\r\n                if(res.data.status === 'success'){ //success updating\r\n                    localStorage.removeItem('username');\r\n                    localStorage.setItem('username', JSON.stringify(res.data.message));\r\n                    var alreadyLiked = this.state.userAlreadyLiked;\r\n                    alreadyLiked[0] = true;\r\n                    this.setState({userAlreadyLiked: alreadyLiked})\r\n                    console.log(this.state.userAlreadyLiked);\r\n                }else{ //failure updating\r\n                    \r\n                }\r\n            })\r\n        }else if(user.favouritesID.includes(this.props.data.id)){\r\n            this.setState({heartState: 0});\r\n            var alreadyLiked = this.state.userAlreadyLiked;\r\n            alreadyLiked[1] = true;\r\n            this.setState({userAlreadyLiked: alreadyLiked})\r\n            console.log('movie id on like change remove: ' + this.props.data.id + ', ' + this.state.movieIDIndex); \r\n            // user delete from favourites\r\n            if(this.state.userAlreadyLiked[0] === true && this.state.userAlreadyLiked[1] === true){\r\n              user.favourites.splice(user.favourites.length - 1, 1);\r\n              user.favouritesID.splice(user.favouritesID.length - 1, 1);\r\n              console.log('not today buddy!!!');\r\n            }else{\r\n              user.favourites.splice(this.state.movieIDIndex, 1);\r\n              user.favouritesID.splice(this.state.movieIDIndex, 1);\r\n            }\r\n\r\n            localStorage.setItem('username', JSON.stringify(user));\r\n            axios.post(this.props.routes.update, {saveData: user})\r\n            .then(res => {\r\n                if(res.data.status === 'success'){ //success updating\r\n                    localStorage.removeItem('username');\r\n                    localStorage.setItem('username', JSON.stringify(res.data.message));\r\n\r\n                }else{ //failure updating\r\n                    \r\n                }\r\n            })\r\n        }\r\n    }\r\n    render(){\r\n        return(\r\n            <div id={this.props.slideupClass}>\r\n                {this.state.video ? <TrailerVideo data={this.state.key} clickHandler={this.userExitPlay}/> : ''}\r\n                <div onClick={() => this.props.clickHandler('none')} id='fullscreenTabContainer'>\r\n                </div>\r\n                <div id='fullscreenSurroundingContainer'>\r\n                        <div id='fullscreenContent'>\r\n                            <div onClick={() => this.props.clickHandler('none')} className='escape_container'>\r\n                                    <p>X</p>\r\n                            </div>\r\n                            <div id='movieInfoContainer'>\r\n\r\n                                <div id='movieImageContainer'>\r\n                                    <img alt='' src={`https://image.tmdb.org/t/p/w1280${this.props.data.poster_path}`}></img>\r\n                                </div>\r\n                                <div id='movieFullInfoContainer'>\r\n                                    <p id='movieFullInfoTitle'>{this.props.data.title}</p>\r\n                                    <div className='movieFullMetricsContainer'>\r\n                                        <p className='movieFullInfoText'>15</p>\r\n                                        <p className='movieFullInfoText movieFullInfoRelease'>{this.props.data.release_date.substring(0,4)}</p>\r\n                                        <div id='fullGenreContainer'>\r\n                                            <p>{this.state.genres[0]}</p>\r\n                                            <img alt='' className='seperator-side' src={CircleSVG}></img>\r\n                                            <p id='secondGenre'>{this.state.genres[1]}</p>\r\n                                        </div>\r\n                                        <div id='movieFullRatingsContainer'>\r\n                                            <img id='featuredStarIcon' alt='' src={StarSVG}></img>\r\n                                            <p>{this.props.data.vote_average}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div id='fullMovieInfoOverviewContainer'>\r\n                                        <p>{this.props.data.overview}</p>\r\n                                    </div>\r\n                                    <div id='movieFullInfoButtonsContainer'>\r\n                                        <div onClick={() => this.HandleLikeClick()} className={this.state.heartClass[this.state.heartState]}>\r\n                                            <img alt='' src={HeartSVG}></img>\r\n                                        </div>\r\n                                        <div onClick={() => this.userPlay()} className='movieFullInfoPlayButton'>\r\n                                            <p>Watch</p>\r\n                                            <img alt='' src={PlaySVG}></img>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default MovieFullTab;"]},"metadata":{},"sourceType":"module"}