{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\willi\\\\OneDrive\\\\Documents\\\\Projects\\\\tudorflix\\\\Client\\\\src\\\\Components\\\\Discover.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport './Discover.css';\nimport MoviesRowFull from './MoviesRowFull';\nimport MovieSlideUp from '../MovieFullTab';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Discover extends Component {\n  constructor(props) {\n    super(props);\n\n    this.userLoadMore = () => {\n      axios.post(this.props.routes.discover, {\n        pageIndex: this.state.pageIndex,\n        genres: JSON.parse(localStorage.getItem('username')).genres\n      }).then(res => {\n        var currentMovies = this.state.DiscoverMovies;\n\n        for (var j = 0; j < res.data.data.length; j++) {\n          for (var i = 0; i < res.data.data[j].results.length; i++) {\n            currentMovies.push(res.data.data[j].results[i]);\n          }\n        }\n\n        this.setState({\n          DiscoverMovies: currentMovies,\n          pageIndex: this.state.pageIndex + 3\n        });\n        console.log(this.state.DiscoverMovies);\n      });\n    };\n\n    this.handleMovieClick = movieID => {\n      if (movieID !== 'none') {\n        this.getMovieInfo(movieID);\n      } else {\n        if (this.state.isOpen === 0) {\n          this.setState({\n            isOpen: 1\n          }); // if by some magic the user has done this\n        } else {\n          this.setState({\n            isOpen: 0\n          });\n          this.forceUpdate();\n        }\n      }\n    };\n\n    this.state = {\n      DiscoverMovies: [],\n      pageIndex: 2,\n      slideUpClass: ['movieFullTabContainer', 'movieFullTabContainerClosed'],\n      isOpen: 0\n    };\n  }\n\n  componentDidMount() {\n    this.requestData();\n  }\n\n  async requestData() {\n    await axios.post(this.props.routes.discover, {\n      pageIndex: 1,\n      genres: JSON.parse(localStorage.getItem('username')).genres\n    }).then(res => {\n      this.setState({\n        DiscoverMovies: res.data.data[0].results\n      });\n    });\n  }\n\n  async getMovieInfo(movieID) {\n    await axios.get(`${this.props.routes.movie}id=${movieID}`).then(res => {\n      var statetoset = 0;\n\n      if (this.state.isOpen === 0) {\n        statetoset = 1;\n      }\n\n      this.setState({\n        currentMovieData: res.data,\n        isOpen: statetoset\n      });\n      return res;\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"DiscoverTab\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"popularTitle\",\n        children: \"Discover For You\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), this.state.DiscoverMovies.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"nullMoviesTitle\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 59\n      }, this) : /*#__PURE__*/_jsxDEV(MoviesRowFull, {\n        clickHandler: this.handleMovieClick,\n        favourites: this.state.DiscoverMovies\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 100\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: () => this.userLoadMore(),\n        id: \"viewMoreButton\",\n        children: \"View More\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), this.state.isOpen ? /*#__PURE__*/_jsxDEV(MovieSlideUp, {\n        routes: this.props.routes,\n        data: this.state.currentMovieData.data[0],\n        clickHandler: this.handleMovieClick,\n        slideupClass: this.state.slideUpClass[this.state.isOpen]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 38\n      }, this) : '']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Discover;","map":{"version":3,"sources":["C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/src/Components/Discover.js"],"names":["React","Component","axios","MoviesRowFull","MovieSlideUp","Discover","constructor","props","userLoadMore","post","routes","discover","pageIndex","state","genres","JSON","parse","localStorage","getItem","then","res","currentMovies","DiscoverMovies","j","data","length","i","results","push","setState","console","log","handleMovieClick","movieID","getMovieInfo","isOpen","forceUpdate","slideUpClass","componentDidMount","requestData","get","movie","statetoset","currentMovieData","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport axios from 'axios';\r\n\r\nimport './Discover.css';\r\n\r\nimport MoviesRowFull from './MoviesRowFull';\r\nimport MovieSlideUp from '../MovieFullTab';\r\n\r\nclass Discover extends Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            DiscoverMovies: [],\r\n            pageIndex: 2,\r\n            slideUpClass: ['movieFullTabContainer', 'movieFullTabContainerClosed'],\r\n            isOpen: 0,\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.requestData();\r\n    }\r\n\r\n    async requestData(){\r\n        await axios.post(this.props.routes.discover, {pageIndex: 1, genres: JSON.parse((localStorage.getItem('username'))).genres})\r\n            .then(res => {\r\n                this.setState({DiscoverMovies: res.data.data[0].results});\r\n            })\r\n    }\r\n\r\n    async getMovieInfo(movieID){\r\n        await axios.get(`${this.props.routes.movie}id=${movieID}`)\r\n            .then(res => {\r\n                var statetoset = 0;\r\n                if(this.state.isOpen === 0){\r\n                    statetoset = 1;\r\n                }\r\n                this.setState({currentMovieData: res.data, isOpen: statetoset});\r\n                return res;\r\n            })\r\n    }\r\n\r\n    userLoadMore = () => {\r\n        axios.post(this.props.routes.discover, {pageIndex: this.state.pageIndex, genres: JSON.parse((localStorage.getItem('username'))).genres})\r\n        .then(res => {\r\n            var currentMovies = this.state.DiscoverMovies;\r\n            for(var j = 0; j < res.data.data.length; j++){\r\n                for(var i = 0; i < res.data.data[j].results.length; i++){\r\n                    currentMovies.push(res.data.data[j].results[i])\r\n                }\r\n            }\r\n            \r\n            this.setState({DiscoverMovies: currentMovies, pageIndex: this.state.pageIndex + 3});\r\n            console.log(this.state.DiscoverMovies);\r\n        })\r\n    }\r\n\r\n    handleMovieClick = (movieID) => {\r\n        if(movieID !== 'none'){\r\n            this.getMovieInfo(movieID)\r\n        }else{\r\n            if(this.state.isOpen === 0){\r\n                this.setState({isOpen: 1}); // if by some magic the user has done this\r\n            }else{\r\n                this.setState({isOpen: 0});\r\n                this.forceUpdate();\r\n            }\r\n        }\r\n    }\r\n    \r\n    render(){\r\n        return(\r\n            <div id='DiscoverTab'>\r\n                <p className='popularTitle'>Discover For You</p>\r\n                {this.state.DiscoverMovies.length === 0 ? <p id='nullMoviesTitle'>Loading...</p> : <MoviesRowFull clickHandler={this.handleMovieClick} favourites={this.state.DiscoverMovies}/>}\r\n                <p onClick={() => this.userLoadMore()} id='viewMoreButton'>View More</p>\r\n                {this.state.isOpen ? <MovieSlideUp routes={this.props.routes} data={this.state.currentMovieData.data[0]} clickHandler={this.handleMovieClick} slideupClass={this.state.slideUpClass[this.state.isOpen]}/> : ''}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Discover;"]},"metadata":{},"sourceType":"module"}