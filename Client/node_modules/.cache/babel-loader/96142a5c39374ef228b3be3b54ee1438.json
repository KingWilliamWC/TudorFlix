{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';//body structure css\nimport'./App.css';import'./Register.css';import Login from'./Login';import SignUp from'./SignUp';import ArrowSVG from\"./SVG/Arrow-Solid.svg\";import DramaSVG from\"./SVG/Drama-Solid.svg\";import AdventureSVG from\"./SVG/Adventure-Solid.svg\";import ComedySVG from\"./SVG/Comedy-Solid.svg\";import HorrorSVG from\"./SVG/Horror-Solid.svg\";import SciFiSVG from\"./SVG/SciFi-Solid.svg\";import ActionSVG from\"./SVG/Action-Solid.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Register=/*#__PURE__*/function(_Component){_inherits(Register,_Component);var _super=_createSuper(Register);function Register(props){var _this;_classCallCheck(this,Register);_this=_super.call(this,props);_this.handleFormInput=function(event){if(event.key==='Enter'){_this.userSubmitInfo();}};_this.UserChangeSignType=function(type){document.getElementsByClassName('userInputBox')[0].value='';document.getElementsByClassName('userInputBox')[1].value='';if(type==='signup'){_this.setState({isSigningUp:true,pageContentState:1,errorState:0});}else if(type==='login'){_this.setState({isSigningUp:false,pageContentState:0,errorState:0});}};_this.initializeSignUpSurvey=function(){_this.setState({loginClassState:1,favouritesClassState:1});};_this.validateEmail=function(email){var re=/^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;return re.test(email);};_this.userSubmitInfo=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var username,email,password;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://LOG IN\nusername=document.getElementsByClassName('userInputBox')[0].value;if(_this.state.isSigningUp){email=document.getElementsByClassName('userInputBox')[1].value;password=document.getElementsByClassName('userInputBox')[2].value;}else{password=document.getElementsByClassName('userInputBox')[1].value;}console.log(username,email,password);if(!(_this.state.isSigningUp===false)){_context.next=8;break;}_context.next=6;return axios.post(_this.props.routes.signin,{'username':username,'password':password}).then(function(res){if(res.data.status==='failure'){_this.setState({errorState:1,errorMessage:'Username or Password is Incorrect'});}else if(res.data.message==='user_successful'){localStorage.setItem('username',JSON.stringify(res.data.user));// console.log(JSON.parse((localStorage.getItem('username'))).genres);\n// console.log(JSON.parse((localStorage.getItem('username'))).genres);\nwindow.location.replace(_this.props.routes.home);}});case 6:_context.next=14;break;case 8:if(!(username.length>4&&_this.validateEmail(email)&&password.length>4)){_context.next=13;break;}_context.next=11;return axios.post(_this.props.routes.isUser,{'username':username}).then(function(res){if(res.data.message==='user_already_exists'){_this.setState({errorState:1,errorMessage:'Username already exists'});}else if(res.data.message==='user_new'){_this.setState({username:username,password:password,email:email});_this.initializeSignUpSurvey();}});case 11:_context.next=14;break;case 13:_this.setState({errorState:1,errorMessage:'Username, Email or Password incorrect'});case 14:case\"end\":return _context.stop();}}},_callee);}));_this.userSubmitSurvey=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(_this.props.routes.signup,{'username':_this.state.username,'password':_this.state.password,'email':_this.state.email,'genres':_this.state.currentSelectedGenres}).then(function(res){if(res.data.status==='success'){localStorage.setItem('username',JSON.stringify(res.data.user));window.location.replace(_this.props.routes.home);}});case 2:case\"end\":return _context2.stop();}}},_callee2);}));_this.state={username:'',password:'',email:'',errorID:['errorSubmissionContainer','errorSubmissionContainer show'],errorState:0,errorMessage:'',isSigningUp:false,pageContent:[{'title':'Log In','subtitle':'Login To Your TudorFlix Account','topright':/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't Have An Account? \",/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return _this.UserChangeSignType('signup');},id:\"createAccountLink\",children:\"Sign Up\"})]})},{'title':'Sign Up','subtitle':'Create a TudorFlix Account','topright':/*#__PURE__*/_jsxs(\"p\",{children:[\"Already Have An Account? \",/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return _this.UserChangeSignType('login');},id:\"createAccountLink\",children:\"Log In\"})]})}],pageContentState:0,loginClass:['loginContainer','loginContainer loginContainerHide'],loginClassState:0,favouritesClass:['surveyFavouritesContainer','surveyFavouritesContainerShow surveyFavouritesContainer'],favouritesClassState:0,genreClasses:[],currentSelectedGenres:[]};_this.handleGenreClick=_this.handleGenreClick.bind(_assertThisInitialized(_this));return _this;}_createClass(Register,[{key:\"componentDidMount\",value:function componentDidMount(){var genreStyleClassesToAdd=[];for(var x=0;x<6;x++){genreStyleClassesToAdd.push('genreContainer');}this.setState({genreClasses:genreStyleClassesToAdd});}},{key:\"handleGenreClick\",value:function handleGenreClick(index,genreNum){if(this.state.currentSelectedGenres.length<3&&!this.state.currentSelectedGenres.includes(genreNum)){var currentStyleArray=this.state.genreClasses;var currentGenreArray=this.state.currentSelectedGenres;currentGenreArray.push(genreNum);currentStyleArray[index]='genreContainer genreSelected';this.setState({genreClasses:currentStyleArray,currentSelectedGenres:currentGenreArray});}else if(this.state.currentSelectedGenres.includes(genreNum)){//user selected the genre already\ncurrentStyleArray=this.state.genreClasses;currentStyleArray[index]='genreContainer';currentGenreArray=this.state.currentSelectedGenres;currentGenreArray=currentGenreArray.filter(function(item){return item!==genreNum;});this.setState({genreClasses:currentStyleArray,currentSelectedGenres:currentGenreArray});}}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{id:\"registerApp\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"topContainer\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"logoContainer\",children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{id:\"firstPartLogo\",children:\"Tudor\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Flix\"})]})}),/*#__PURE__*/_jsx(\"div\",{id:\"signUpLinkContainer\",children:this.state.pageContent[this.state.pageContentState].topright})]}),/*#__PURE__*/_jsxs(\"div\",{className:this.state.loginClass[this.state.loginClassState],children:[/*#__PURE__*/_jsx(\"p\",{id:\"loginTitle\",children:this.state.pageContent[this.state.pageContentState].title}),/*#__PURE__*/_jsx(\"p\",{id:\"sublogintitle\",children:this.state.pageContent[this.state.pageContentState].subtitle}),/*#__PURE__*/_jsxs(\"div\",{className:this.state.errorID[this.state.errorState],children:[/*#__PURE__*/_jsx(\"p\",{id:\"errorTitle\",children:\"Error\"}),/*#__PURE__*/_jsx(\"p\",{children:this.state.errorMessage})]}),this.state.isSigningUp?/*#__PURE__*/_jsx(SignUp,{handleInput:this.handleFormInput}):/*#__PURE__*/_jsx(Login,{handleInput:this.handleFormInput}),/*#__PURE__*/_jsx(\"div\",{onClick:this.userSubmitInfo,id:\"loginButtonContainer\",children:/*#__PURE__*/_jsx(\"img\",{className:\"loginButton\",src:ArrowSVG,alt:\"\"})})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"surveyContainer\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"surveyTitle\",children:\"What Are Your Favourite Genres? (Select Up To 3)\"}),/*#__PURE__*/_jsxs(\"div\",{className:this.state.favouritesClass[this.state.favouritesClassState],children:[/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return _this2.handleGenreClick(0,18);},className:this.state.genreClasses[0],children:[/*#__PURE__*/_jsx(\"img\",{className:\"genreImage\",src:DramaSVG,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{className:\"genreName\",children:\"Drama\"})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return _this2.handleGenreClick(1,28);},className:this.state.genreClasses[1],children:[/*#__PURE__*/_jsx(\"img\",{className:\"genreImage\",src:ActionSVG,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{className:\"genreName\",children:\"Action\"})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return _this2.handleGenreClick(2,12);},className:this.state.genreClasses[2],children:[/*#__PURE__*/_jsx(\"img\",{className:\"genreImage\",src:AdventureSVG,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{className:\"genreName\",children:\"Adventure\"})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return _this2.handleGenreClick(3,35);},className:this.state.genreClasses[3],children:[/*#__PURE__*/_jsx(\"img\",{className:\"genreImage\",src:ComedySVG,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{className:\"genreName\",children:\"Comedy\"})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return _this2.handleGenreClick(4,27);},className:this.state.genreClasses[4],children:[/*#__PURE__*/_jsx(\"img\",{className:\"genreImage\",src:HorrorSVG,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{className:\"genreName\",children:\"Horror\"})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return _this2.handleGenreClick(5,878);},className:this.state.genreClasses[5],children:[/*#__PURE__*/_jsx(\"img\",{className:\"genreImage\",src:SciFiSVG,alt:\"\"}),/*#__PURE__*/_jsx(\"p\",{className:\"genreName\",children:\"Science Fiction\"})]})]}),/*#__PURE__*/_jsx(\"div\",{onClick:this.userSubmitSurvey,id:\"surveyButtonContainer\",children:/*#__PURE__*/_jsx(\"img\",{className:\"loginButton\",src:ArrowSVG,alt:\"\"})})]}),/*#__PURE__*/_jsx(\"p\",{id:\"allrightsText\",children:\"TudorFlix\\xAE 2021 \"})]});}}]);return Register;}(Component);export default Register;","map":{"version":3,"sources":["C:/Users/willi/OneDrive/Documents/Projects/tudorflix/Client/src/Register.js"],"names":["React","Component","axios","Login","SignUp","Register","props","handleFormInput","event","key","userSubmitInfo","UserChangeSignType","type","document","getElementsByClassName","value","setState","isSigningUp","pageContentState","errorState","initializeSignUpSurvey","loginClassState","favouritesClassState","validateEmail","email","re","test","username","state","password","console","log","post","routes","signin","then","res","data","status","errorMessage","message","localStorage","setItem","JSON","stringify","user","window","location","replace","home","length","isUser","userSubmitSurvey","signup","currentSelectedGenres","errorID","pageContent","loginClass","favouritesClass","genreClasses","handleGenreClick","bind","genreStyleClassesToAdd","x","push","index","genreNum","includes","currentStyleArray","currentGenreArray","filter","item","topright","title","subtitle","ArrowSVG","DramaSVG","ActionSVG","AdventureSVG","ComedySVG","HorrorSVG","SciFiSVG"],"mappings":"2tCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA;AACA,MAAO,WAAP,CACA,MAAO,gBAAP,CAEA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,C,6ZAUMC,CAAAA,Q,oGACF,kBAAYC,KAAZ,CAAkB,0CACd,uBAAMA,KAAN,EADc,MA0BlBC,eA1BkB,CA0BD,SAACC,KAAD,CAAW,CACxB,GAAGA,KAAK,CAACC,GAAN,GAAc,OAAjB,CAAyB,CACrB,MAAKC,cAAL,GACH,CACJ,CA9BiB,OAgClBC,kBAhCkB,CAgCG,SAACC,IAAD,CAAS,CAC1BC,QAAQ,CAACC,sBAAT,CAAgC,cAAhC,EAAgD,CAAhD,EAAmDC,KAAnD,CAA2D,EAA3D,CACAF,QAAQ,CAACC,sBAAT,CAAgC,cAAhC,EAAgD,CAAhD,EAAmDC,KAAnD,CAA2D,EAA3D,CACA,GAAGH,IAAI,GAAK,QAAZ,CAAqB,CACjB,MAAKI,QAAL,CAAc,CAACC,WAAW,CAAE,IAAd,CAAoBC,gBAAgB,CAAE,CAAtC,CAAyCC,UAAU,CAAE,CAArD,CAAd,EACH,CAFD,IAEM,IAAGP,IAAI,GAAK,OAAZ,CAAoB,CACtB,MAAKI,QAAL,CAAc,CAACC,WAAW,CAAE,KAAd,CAAqBC,gBAAgB,CAAE,CAAvC,CAA0CC,UAAU,CAAE,CAAtD,CAAd,EACH,CACJ,CAxCiB,OA0ClBC,sBA1CkB,CA0CO,UAAM,CAC3B,MAAKJ,QAAL,CAAc,CAACK,eAAe,CAAE,CAAlB,CAAqBC,oBAAoB,CAAE,CAA3C,CAAd,EACH,CA5CiB,OAsDlBC,aAtDkB,CAsDF,SAACC,KAAD,CAAW,CACvB,GAAMC,CAAAA,EAAE,CAAG,2JAAX,CACA,MAAOA,CAAAA,EAAE,CAACC,IAAH,CAAQF,KAAR,CAAP,CACH,CAzDiB,OA2DlBd,cA3DkB,sEA2DD,+JAAa;AACtBiB,QADS,CACEd,QAAQ,CAACC,sBAAT,CAAgC,cAAhC,EAAgD,CAAhD,EAAmDC,KADrD,CAEb,GAAG,MAAKa,KAAL,CAAWX,WAAd,CAA0B,CAClBO,KADkB,CACVX,QAAQ,CAACC,sBAAT,CAAgC,cAAhC,EAAgD,CAAhD,EAAmDC,KADzC,CAElBc,QAFkB,CAEPhB,QAAQ,CAACC,sBAAT,CAAgC,cAAhC,EAAgD,CAAhD,EAAmDC,KAF5C,CAGzB,CAHD,IAGK,CACDc,QAAQ,CAAGhB,QAAQ,CAACC,sBAAT,CAAgC,cAAhC,EAAgD,CAAhD,EAAmDC,KAA9D,CACH,CAGDe,OAAO,CAACC,GAAR,CAAYJ,QAAZ,CAAsBH,KAAtB,CAA6BK,QAA7B,EAVa,KAWV,MAAKD,KAAL,CAAWX,WAAX,GAA2B,KAXjB,gDAYHf,CAAAA,KAAK,CAAC8B,IAAN,CAAW,MAAK1B,KAAL,CAAW2B,MAAX,CAAkBC,MAA7B,CAAqC,CAAC,WAAYP,QAAb,CAAuB,WAAYE,QAAnC,CAArC,EACLM,IADK,CACA,SAAAC,GAAG,CAAI,CACT,GAAGA,GAAG,CAACC,IAAJ,CAASC,MAAT,GAAoB,SAAvB,CAAiC,CAC7B,MAAKtB,QAAL,CAAc,CAAEG,UAAU,CAAE,CAAd,CAAiBoB,YAAY,CAAE,mCAA/B,CAAd,EACH,CAFD,IAEM,IAAGH,GAAG,CAACC,IAAJ,CAASG,OAAT,GAAqB,iBAAxB,CAA0C,CAC5CC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAiCC,IAAI,CAACC,SAAL,CAAeR,GAAG,CAACC,IAAJ,CAASQ,IAAxB,CAAjC,EACA;AAAA;AACAC,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,MAAK1C,KAAL,CAAW2B,MAAX,CAAkBgB,IAA1C,EACH,CACJ,CATK,CAZG,2CAuBNtB,QAAQ,CAACuB,MAAT,CAAkB,CAAlB,EAAuB,MAAK3B,aAAL,CAAmBC,KAAnB,CAAvB,EAAoDK,QAAQ,CAACqB,MAAT,CAAkB,CAvBhE,kDAwBChD,CAAAA,KAAK,CAAC8B,IAAN,CAAW,MAAK1B,KAAL,CAAW2B,MAAX,CAAkBkB,MAA7B,CAAqC,CAAC,WAAYxB,QAAb,CAArC,EACDQ,IADC,CACI,SAAAC,GAAG,CAAI,CACT,GAAGA,GAAG,CAACC,IAAJ,CAASG,OAAT,GAAqB,qBAAxB,CAA8C,CAC1C,MAAKxB,QAAL,CAAc,CAAEG,UAAU,CAAE,CAAd,CAAiBoB,YAAY,CAAE,yBAA/B,CAAd,EACH,CAFD,IAEM,IAAGH,GAAG,CAACC,IAAJ,CAASG,OAAT,GAAqB,UAAxB,CAAmC,CACrC,MAAKxB,QAAL,CAAc,CAACW,QAAQ,CAAEA,QAAX,CAAqBE,QAAQ,CAAEA,QAA/B,CAAyCL,KAAK,CAAEA,KAAhD,CAAd,EACA,MAAKJ,sBAAL,GACH,CACJ,CARC,CAxBD,wCAkCL,MAAKJ,QAAL,CAAc,CAAEG,UAAU,CAAE,CAAd,CAAiBoB,YAAY,CAAE,uCAA/B,CAAd,EAlCK,uDA3DC,SAmGlBa,gBAnGkB,sEAmGC,+JACTlD,CAAAA,KAAK,CAAC8B,IAAN,CAAW,MAAK1B,KAAL,CAAW2B,MAAX,CAAkBoB,MAA7B,CAAqC,CAAC,WAAY,MAAKzB,KAAL,CAAWD,QAAxB,CAAkC,WAAY,MAAKC,KAAL,CAAWC,QAAzD,CAAmE,QAAS,MAAKD,KAAL,CAAWJ,KAAvF,CAA8F,SAAU,MAAKI,KAAL,CAAW0B,qBAAnH,CAArC,EACLnB,IADK,CACA,SAAAC,GAAG,CAAG,CACR,GAAGA,GAAG,CAACC,IAAJ,CAASC,MAAT,GAAoB,SAAvB,CAAiC,CAC7BG,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAiCC,IAAI,CAACC,SAAL,CAAeR,GAAG,CAACC,IAAJ,CAASQ,IAAxB,CAAjC,EACAC,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,MAAK1C,KAAL,CAAW2B,MAAX,CAAkBgB,IAA1C,EACH,CACJ,CANK,CADS,yDAnGD,GAEd,MAAKrB,KAAL,CAAa,CACTD,QAAQ,CAAE,EADD,CAETE,QAAQ,CAAE,EAFD,CAGTL,KAAK,CAAE,EAHE,CAIT+B,OAAO,CAAE,CAAC,0BAAD,CAA6B,+BAA7B,CAJA,CAKTpC,UAAU,CAAE,CALH,CAMToB,YAAY,CAAE,EANL,CAOTtB,WAAW,CAAE,KAPJ,CAQTuC,WAAW,CAAE,CACD,CAAC,QAAS,QAAV,CAAoB,WAAY,iCAAhC,CAAmE,wBAAY,4DAA0B,aAAM,OAAO,CAAE,yBAAO,OAAK7C,kBAAL,CAAwB,QAAxB,CAAP,EAAf,CAA0D,EAAE,CAAC,mBAA7D,qBAA1B,GAA/E,CADC,CAET,CAAC,QAAS,SAAV,CAAqB,WAAY,4BAAjC,CAA+D,wBAAY,8DAA4B,aAAM,OAAO,CAAE,yBAAO,OAAKA,kBAAL,CAAwB,OAAxB,CAAP,EAAf,CAAyD,EAAE,CAAC,mBAA5D,oBAA5B,GAA3E,CAFS,CARJ,CAYTO,gBAAgB,CAAE,CAZT,CAaTuC,UAAU,CAAE,CAAC,gBAAD,CAAmB,mCAAnB,CAbH,CAcTpC,eAAe,CAAE,CAdR,CAeTqC,eAAe,CAAE,CAAC,2BAAD,CAA8B,yDAA9B,CAfR,CAgBTpC,oBAAoB,CAAE,CAhBb,CAiBTqC,YAAY,CAAE,EAjBL,CAkBTL,qBAAqB,CAAE,EAlBd,CAAb,CAqBA,MAAKM,gBAAL,CAAyB,MAAKA,gBAAL,CAAsBC,IAAtB,+BAAzB,CAvBc,aAwBjB,C,sDAsBD,4BAAoB,CAChB,GAAIC,CAAAA,sBAAsB,CAAG,EAA7B,CACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,CAApB,CAAuBA,CAAC,EAAxB,CAA2B,CACvBD,sBAAsB,CAACE,IAAvB,CAA4B,gBAA5B,EACH,CACD,KAAKhD,QAAL,CAAc,CAAC2C,YAAY,CAAEG,sBAAf,CAAd,EACH,C,gCAyDD,0BAAiBG,KAAjB,CAAwBC,QAAxB,CAAiC,CAC7B,GAAG,KAAKtC,KAAL,CAAW0B,qBAAX,CAAiCJ,MAAjC,CAA0C,CAA1C,EAA+C,CAAC,KAAKtB,KAAL,CAAW0B,qBAAX,CAAiCa,QAAjC,CAA0CD,QAA1C,CAAnD,CAAuG,CACnG,GAAIE,CAAAA,iBAAiB,CAAG,KAAKxC,KAAL,CAAW+B,YAAnC,CACA,GAAIU,CAAAA,iBAAiB,CAAG,KAAKzC,KAAL,CAAW0B,qBAAnC,CACAe,iBAAiB,CAACL,IAAlB,CAAuBE,QAAvB,EACAE,iBAAiB,CAACH,KAAD,CAAjB,CAA2B,8BAA3B,CACA,KAAKjD,QAAL,CAAc,CAAC2C,YAAY,CAAES,iBAAf,CAAkCd,qBAAqB,CAAEe,iBAAzD,CAAd,EACH,CAND,IAMM,IAAG,KAAKzC,KAAL,CAAW0B,qBAAX,CAAiCa,QAAjC,CAA0CD,QAA1C,CAAH,CAAuD,CAAE;AAC3DE,iBAAiB,CAAG,KAAKxC,KAAL,CAAW+B,YAA/B,CACAS,iBAAiB,CAACH,KAAD,CAAjB,CAA2B,gBAA3B,CACAI,iBAAiB,CAAG,KAAKzC,KAAL,CAAW0B,qBAA/B,CACAe,iBAAiB,CAAGA,iBAAiB,CAACC,MAAlB,CAAyB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,GAAKL,QAAb,EAA7B,CAApB,CACA,KAAKlD,QAAL,CAAc,CAAC2C,YAAY,CAAES,iBAAf,CAAkCd,qBAAqB,CAAEe,iBAAzD,CAAd,EACH,CACJ,C,sBAED,iBAAQ,iBACJ,mBACI,aAAK,EAAE,CAAC,aAAR,wBACI,aAAK,EAAE,CAAC,cAAR,wBACI,YAAK,EAAE,CAAC,eAAR,uBACI,kCAAG,aAAM,EAAE,CAAC,eAAT,mBAAH,cAAwC,8BAAxC,GADJ,EADJ,cAII,YAAK,EAAE,CAAC,qBAAR,UAEK,KAAKzC,KAAL,CAAW4B,WAAX,CAAuB,KAAK5B,KAAL,CAAWV,gBAAlC,EAAoDsD,QAFzD,EAJJ,GADJ,cAUI,aAAK,SAAS,CAAE,KAAK5C,KAAL,CAAW6B,UAAX,CAAsB,KAAK7B,KAAL,CAAWP,eAAjC,CAAhB,wBACI,UAAG,EAAE,CAAC,YAAN,UAAoB,KAAKO,KAAL,CAAW4B,WAAX,CAAuB,KAAK5B,KAAL,CAAWV,gBAAlC,EAAoDuD,KAAxE,EADJ,cAEI,UAAG,EAAE,CAAC,eAAN,UAAuB,KAAK7C,KAAL,CAAW4B,WAAX,CAAuB,KAAK5B,KAAL,CAAWV,gBAAlC,EAAoDwD,QAA3E,EAFJ,cAGI,aAAK,SAAS,CAAE,KAAK9C,KAAL,CAAW2B,OAAX,CAAmB,KAAK3B,KAAL,CAAWT,UAA9B,CAAhB,wBACI,UAAG,EAAE,CAAC,YAAN,mBADJ,cAEI,mBAAI,KAAKS,KAAL,CAAWW,YAAf,EAFJ,GAHJ,CAOK,KAAKX,KAAL,CAAWX,WAAX,cAAyB,KAAC,MAAD,EAAQ,WAAW,CAAE,KAAKV,eAA1B,EAAzB,cAAwE,KAAC,KAAD,EAAO,WAAW,CAAE,KAAKA,eAAzB,EAP7E,cAQI,YAAK,OAAO,CAAE,KAAKG,cAAnB,CAAmC,EAAE,CAAC,sBAAtC,uBACI,YAAK,SAAS,CAAC,aAAf,CAA6B,GAAG,CAAEiE,QAAlC,CAA4C,GAAG,CAAC,EAAhD,EADJ,EARJ,GAVJ,cAsBI,aAAK,EAAE,CAAC,iBAAR,wBACI,UAAG,EAAE,CAAC,aAAN,8DADJ,cAEI,aAAK,SAAS,CAAE,KAAK/C,KAAL,CAAW8B,eAAX,CAA2B,KAAK9B,KAAL,CAAWN,oBAAtC,CAAhB,wBACI,aAAK,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACsC,gBAAL,CAAsB,CAAtB,CAAyB,EAAzB,CAAN,EAAd,CAAkD,SAAS,CAAE,KAAKhC,KAAL,CAAW+B,YAAX,CAAwB,CAAxB,CAA7D,wBACI,YAAK,SAAS,CAAC,YAAf,CAA4B,GAAG,CAAEiB,QAAjC,CAA2C,GAAG,CAAC,EAA/C,EADJ,cAEI,UAAG,SAAS,CAAC,WAAb,mBAFJ,GADJ,cAKI,aAAK,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAChB,gBAAL,CAAsB,CAAtB,CAAyB,EAAzB,CAAN,EAAd,CAAkD,SAAS,CAAE,KAAKhC,KAAL,CAAW+B,YAAX,CAAwB,CAAxB,CAA7D,wBACI,YAAK,SAAS,CAAC,YAAf,CAA4B,GAAG,CAAEkB,SAAjC,CAA4C,GAAG,CAAC,EAAhD,EADJ,cAEI,UAAG,SAAS,CAAC,WAAb,oBAFJ,GALJ,cASI,aAAK,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACjB,gBAAL,CAAsB,CAAtB,CAAyB,EAAzB,CAAN,EAAd,CAAkD,SAAS,CAAE,KAAKhC,KAAL,CAAW+B,YAAX,CAAwB,CAAxB,CAA7D,wBACI,YAAK,SAAS,CAAC,YAAf,CAA4B,GAAG,CAAEmB,YAAjC,CAA+C,GAAG,CAAC,EAAnD,EADJ,cAEI,UAAG,SAAS,CAAC,WAAb,uBAFJ,GATJ,cAaI,aAAK,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAClB,gBAAL,CAAsB,CAAtB,CAAyB,EAAzB,CAAN,EAAd,CAAkD,SAAS,CAAE,KAAKhC,KAAL,CAAW+B,YAAX,CAAwB,CAAxB,CAA7D,wBACI,YAAK,SAAS,CAAC,YAAf,CAA4B,GAAG,CAAEoB,SAAjC,CAA4C,GAAG,CAAC,EAAhD,EADJ,cAEI,UAAG,SAAS,CAAC,WAAb,oBAFJ,GAbJ,cAiBI,aAAK,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACnB,gBAAL,CAAsB,CAAtB,CAAyB,EAAzB,CAAN,EAAd,CAAkD,SAAS,CAAE,KAAKhC,KAAL,CAAW+B,YAAX,CAAwB,CAAxB,CAA7D,wBACI,YAAK,SAAS,CAAC,YAAf,CAA4B,GAAG,CAAEqB,SAAjC,CAA4C,GAAG,CAAC,EAAhD,EADJ,cAEI,UAAG,SAAS,CAAC,WAAb,oBAFJ,GAjBJ,cAqBI,aAAK,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACpB,gBAAL,CAAsB,CAAtB,CAAyB,GAAzB,CAAN,EAAd,CAAmD,SAAS,CAAE,KAAKhC,KAAL,CAAW+B,YAAX,CAAwB,CAAxB,CAA9D,wBACI,YAAK,SAAS,CAAC,YAAf,CAA4B,GAAG,CAAEsB,QAAjC,CAA2C,GAAG,CAAC,EAA/C,EADJ,cAEI,UAAG,SAAS,CAAC,WAAb,6BAFJ,GArBJ,GAFJ,cA4BI,YAAK,OAAO,CAAE,KAAK7B,gBAAnB,CAAqC,EAAE,CAAC,uBAAxC,uBACI,YAAK,SAAS,CAAC,aAAf,CAA6B,GAAG,CAAEuB,QAAlC,CAA4C,GAAG,CAAC,EAAhD,EADJ,EA5BJ,GAtBJ,cAuDI,UAAG,EAAE,CAAC,eAAN,iCAvDJ,GADJ,CA2DH,C,sBA1LkB1E,S,EA6LvB,cAAeI,CAAAA,QAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\n\r\n//body structure css\r\nimport './App.css';\r\nimport './Register.css';\r\n\r\nimport Login from './Login';\r\nimport SignUp from './SignUp';\r\n\r\nimport ArrowSVG from './SVG/Arrow-Solid.svg';\r\nimport DramaSVG from './SVG/Drama-Solid.svg';\r\nimport AdventureSVG from './SVG/Adventure-Solid.svg';\r\nimport ComedySVG from './SVG/Comedy-Solid.svg';\r\nimport HorrorSVG from './SVG/Horror-Solid.svg';\r\nimport SciFiSVG from './SVG/SciFi-Solid.svg';\r\nimport ActionSVG from './SVG/Action-Solid.svg';\r\n\r\nclass Register extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            username: '',\r\n            password: '',\r\n            email: '',\r\n            errorID: ['errorSubmissionContainer', 'errorSubmissionContainer show'],\r\n            errorState: 0,\r\n            errorMessage: '',\r\n            isSigningUp: false,\r\n            pageContent: [\r\n                        {'title': 'Log In', 'subtitle': 'Login To Your TudorFlix Account', 'topright': <p>Don't Have An Account? <span onClick={() => (this.UserChangeSignType('signup'))} id='createAccountLink'>Sign Up</span></p>},\r\n                {'title': 'Sign Up', 'subtitle': 'Create a TudorFlix Account', 'topright': <p>Already Have An Account? <span onClick={() => (this.UserChangeSignType('login'))} id='createAccountLink'>Log In</span></p>}\r\n            ],\r\n            pageContentState: 0,\r\n            loginClass: ['loginContainer', 'loginContainer loginContainerHide'],\r\n            loginClassState: 0,\r\n            favouritesClass: ['surveyFavouritesContainer', 'surveyFavouritesContainerShow surveyFavouritesContainer'],\r\n            favouritesClassState: 0,\r\n            genreClasses: [],\r\n            currentSelectedGenres: [],\r\n        }\r\n\r\n        this.handleGenreClick =  this.handleGenreClick.bind(this)\r\n    }\r\n\r\n    handleFormInput= (event) => {\r\n        if(event.key === 'Enter'){\r\n            this.userSubmitInfo();\r\n        }\r\n    }\r\n\r\n    UserChangeSignType = (type) =>{\r\n        document.getElementsByClassName('userInputBox')[0].value = '';\r\n        document.getElementsByClassName('userInputBox')[1].value = '';\r\n        if(type === 'signup'){\r\n            this.setState({isSigningUp: true, pageContentState: 1, errorState: 0});\r\n        }else if(type === 'login'){\r\n            this.setState({isSigningUp: false, pageContentState: 0, errorState: 0});\r\n        }\r\n    }\r\n\r\n    initializeSignUpSurvey = () => {\r\n        this.setState({loginClassState: 1, favouritesClassState: 1});\r\n    }\r\n\r\n    componentDidMount() {\r\n        var genreStyleClassesToAdd = []\r\n        for (var x = 0; x < 6; x++){\r\n            genreStyleClassesToAdd.push('genreContainer');\r\n        }\r\n        this.setState({genreClasses: genreStyleClassesToAdd});\r\n    }\r\n\r\n    validateEmail = (email) => {\r\n        const re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n        return re.test(email);\r\n    }\r\n\r\n    userSubmitInfo = async () =>{ //LOG IN\r\n        var username = document.getElementsByClassName('userInputBox')[0].value;\r\n        if(this.state.isSigningUp){\r\n            var email = document.getElementsByClassName('userInputBox')[1].value;\r\n            var password = document.getElementsByClassName('userInputBox')[2].value;\r\n        }else{\r\n            password = document.getElementsByClassName('userInputBox')[1].value;\r\n        }\r\n\r\n\r\n        console.log(username, email, password);\r\n        if(this.state.isSigningUp === false){\r\n            await axios.post(this.props.routes.signin, {'username': username, 'password': password})\r\n            .then(res => {\r\n                if(res.data.status === 'failure'){\r\n                    this.setState({ errorState: 1, errorMessage: 'Username or Password is Incorrect'})\r\n                }else if(res.data.message === 'user_successful'){\r\n                    localStorage.setItem('username', JSON.stringify(res.data.user));\r\n                    // console.log(JSON.parse((localStorage.getItem('username'))).genres);\r\n                    window.location.replace(this.props.routes.home)\r\n                }\r\n            })\r\n        }else{ //SIGN UP\r\n            if(username.length > 4 && this.validateEmail(email) && password.length > 4){\r\n                await axios.post(this.props.routes.isUser, {'username': username})\r\n                    .then(res => {\r\n                        if(res.data.message === 'user_already_exists'){\r\n                            this.setState({ errorState: 1, errorMessage: 'Username already exists'});\r\n                        }else if(res.data.message === 'user_new'){\r\n                            this.setState({username: username, password: password, email: email});\r\n                            this.initializeSignUpSurvey();\r\n                        }\r\n                    })\r\n            }else{\r\n                this.setState({ errorState: 1, errorMessage: 'Username, Email or Password incorrect'});\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n    userSubmitSurvey = async () =>{// SUBMIT USER INFORMATION FOR SIGNINGUP\r\n        await axios.post(this.props.routes.signup, {'username': this.state.username, 'password': this.state.password, 'email': this.state.email, 'genres': this.state.currentSelectedGenres})\r\n        .then(res =>{\r\n            if(res.data.status === 'success'){\r\n                localStorage.setItem('username', JSON.stringify(res.data.user));\r\n                window.location.replace(this.props.routes.home)\r\n            }\r\n        })\r\n    }\r\n\r\n    handleGenreClick(index, genreNum){\r\n        if(this.state.currentSelectedGenres.length < 3 && !this.state.currentSelectedGenres.includes(genreNum)){\r\n            var currentStyleArray = this.state.genreClasses;\r\n            var currentGenreArray = this.state.currentSelectedGenres;\r\n            currentGenreArray.push(genreNum);\r\n            currentStyleArray[index] = 'genreContainer genreSelected';\r\n            this.setState({genreClasses: currentStyleArray, currentSelectedGenres: currentGenreArray});\r\n        }else if(this.state.currentSelectedGenres.includes(genreNum)){ //user selected the genre already\r\n            currentStyleArray = this.state.genreClasses;\r\n            currentStyleArray[index] = 'genreContainer';\r\n            currentGenreArray = this.state.currentSelectedGenres;\r\n            currentGenreArray = currentGenreArray.filter(item => item !== genreNum);\r\n            this.setState({genreClasses: currentStyleArray, currentSelectedGenres: currentGenreArray});\r\n        }\r\n    }\r\n    \r\n    render(){\r\n        return(\r\n            <div id='registerApp'>\r\n                <div id='topContainer'>\r\n                    <div id='logoContainer'>\r\n                        <p><span id='firstPartLogo'>Tudor</span><span>Flix</span></p>\r\n                    </div>\r\n                    <div id='signUpLinkContainer'>\r\n                        {/* <p>Don't have an account? <span onClick={this.UsergotoSignUp} id='createAccountLink'>Create Account</span></p> */}\r\n                        {this.state.pageContent[this.state.pageContentState].topright}\r\n                    </div>\r\n                </div>\r\n                <div className={this.state.loginClass[this.state.loginClassState]}>\r\n                    <p id='loginTitle'>{this.state.pageContent[this.state.pageContentState].title}</p>\r\n                    <p id='sublogintitle'>{this.state.pageContent[this.state.pageContentState].subtitle}</p>\r\n                    <div className={this.state.errorID[this.state.errorState]}>\r\n                        <p id='errorTitle'>Error</p>\r\n                        <p>{this.state.errorMessage}</p>\r\n                    </div>\r\n                    {this.state.isSigningUp ? <SignUp handleInput={this.handleFormInput}/> : <Login handleInput={this.handleFormInput}/>}\r\n                    <div onClick={this.userSubmitInfo} id='loginButtonContainer'>\r\n                        <img className='loginButton' src={ArrowSVG} alt=''></img>\r\n                    </div>\r\n                </div>\r\n                <div id='surveyContainer'>\r\n                    <p id='surveyTitle'>What Are Your Favourite Genres? (Select Up To 3)</p>\r\n                    <div className={this.state.favouritesClass[this.state.favouritesClassState]}>\r\n                        <div onClick={() => this.handleGenreClick(0, 18)} className={this.state.genreClasses[0]}>\r\n                            <img className='genreImage' src={DramaSVG} alt=''></img>\r\n                            <p className='genreName'>Drama</p>\r\n                        </div>\r\n                        <div onClick={() => this.handleGenreClick(1, 28)} className={this.state.genreClasses[1]}>\r\n                            <img className='genreImage' src={ActionSVG} alt=''></img>\r\n                            <p className='genreName'>Action</p>\r\n                        </div>\r\n                        <div onClick={() => this.handleGenreClick(2, 12)} className={this.state.genreClasses[2]}>\r\n                            <img className='genreImage' src={AdventureSVG} alt=''></img>\r\n                            <p className='genreName'>Adventure</p>\r\n                        </div>\r\n                        <div onClick={() => this.handleGenreClick(3, 35)} className={this.state.genreClasses[3]}>\r\n                            <img className='genreImage' src={ComedySVG} alt=''></img>\r\n                            <p className='genreName'>Comedy</p>\r\n                        </div>\r\n                        <div onClick={() => this.handleGenreClick(4, 27)} className={this.state.genreClasses[4]}>\r\n                            <img className='genreImage' src={HorrorSVG} alt=''></img>\r\n                            <p className='genreName'>Horror</p>\r\n                        </div>\r\n                        <div onClick={() => this.handleGenreClick(5, 878)} className={this.state.genreClasses[5]}>\r\n                            <img className='genreImage' src={SciFiSVG} alt=''></img>\r\n                            <p className='genreName'>Science Fiction</p>\r\n                        </div>\r\n                    </div>\r\n                    <div onClick={this.userSubmitSurvey} id='surveyButtonContainer'>\r\n                        <img className='loginButton' src={ArrowSVG} alt=''></img>\r\n                    </div>\r\n                </div>\r\n                \r\n                <p id='allrightsText'>TudorFlix&#174; 2021 </p>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Register;\r\n"]},"metadata":{},"sourceType":"module"}